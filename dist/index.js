var N6=Object.create;var{defineProperty:F$,getPrototypeOf:j6,getOwnPropertyNames:v6}=Object;var M6=Object.prototype.hasOwnProperty;var V6=($,Q,W)=>{W=$!=null?N6(j6($)):{};const J=Q||!$||!$.__esModule?F$(W,"default",{value:$,enumerable:!0}):W;for(let Y of v6($))if(!M6.call(J,Y))F$(J,Y,{get:()=>$[Y],enumerable:!0});return J};var E0=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports);var f$=E0((i8,C$)=>{var h=function($){this.value=$};h.math={isDegree:!0,acos:function($){return h.math.isDegree?180/Math.PI*Math.acos($):Math.acos($)},add:function($,Q){return $+Q},asin:function($){return h.math.isDegree?180/Math.PI*Math.asin($):Math.asin($)},atan:function($){return h.math.isDegree?180/Math.PI*Math.atan($):Math.atan($)},acosh:function($){return Math.log($+Math.sqrt($*$-1))},asinh:function($){return Math.log($+Math.sqrt($*$+1))},atanh:function($){return Math.log((1+$)/(1-$))},C:function($,Q){var W=1,J=$-Q,Y=Q;if(Y<J)Y=J,J=Q;for(var H=Y+1;H<=$;H++)W*=H;return W/h.math.fact(J)},changeSign:function($){return-$},cos:function($){if(h.math.isDegree)$=h.math.toRadian($);return Math.cos($)},cosh:function($){return(Math.pow(Math.E,$)+Math.pow(Math.E,-1*$))/2},div:function($,Q){return $/Q},fact:function($){if($%1!==0)return"NaN";var Q=1;for(var W=2;W<=$;W++)Q*=W;return Q},inverse:function($){return 1/$},log:function($){return Math.log($)/Math.log(10)},mod:function($,Q){return $%Q},mul:function($,Q){return $*Q},P:function($,Q){var W=1;for(var J=Math.floor($)-Math.floor(Q)+1;J<=Math.floor($);J++)W*=J;return W},Pi:function($,Q,W){var J=1;for(var Y=$;Y<=Q;Y++)J*=Number(W.postfixEval({n:Y}));return J},pow10x:function($){var Q=1;while($--)Q*=10;return Q},sigma:function($,Q,W){var J=0;for(var Y=$;Y<=Q;Y++)J+=Number(W.postfixEval({n:Y}));return J},sin:function($){if(h.math.isDegree)$=h.math.toRadian($);return Math.sin($)},sinh:function($){return(Math.pow(Math.E,$)-Math.pow(Math.E,-1*$))/2},sub:function($,Q){return $-Q},tan:function($){if(h.math.isDegree)$=h.math.toRadian($);return Math.tan($)},tanh:function($){return h.sinha($)/h.cosha($)},toRadian:function($){return $*Math.PI/180},and:function($,Q){return $&Q}};h.Exception=function($){this.message=$};C$.exports=h});var b$=E0((a8,I$)=>{var k=function($,Q){for(var W=0;W<$.length;W++)$[W]+=Q;return $},y6=function($,Q,W,J){for(var Y=0;Y<J;Y++)if($[W+Y]!==Q[Y])return!1;return!0},A$=function($,Q){for(var W=0;W<Q.length;W++)if(Q[W].token===$)return W;return-1},l6=function($){var Q=[],W=$.length,J,Y,H;for(var q=0;q<W;q++){if(q<W-1&&$[q]===" "&&$[q+1]===" ")continue;J="";for(Y=$.length-q>g.length-2?g.length-1:$.length-q;Y>0;Y--){if(g[Y]===void 0)continue;for(H=0;H<g[Y].length;H++)if(y6($,g[Y][H],q,Y))J=g[Y][H],H=g[Y].length,Y=0}if(q+=J.length-1,J==="")throw new D.Exception("Can't understand after "+$.slice(q));Q.push(s[A$(J,s)])}return Q},D=f$(),s=[{token:"sin",show:"sin",type:0,value:D.math.sin},{token:"cos",show:"cos",type:0,value:D.math.cos},{token:"tan",show:"tan",type:0,value:D.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:D.math.P},{token:"C",show:"C",type:10,value:D.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:D.math.asin},{token:"acos",show:"acos",type:0,value:D.math.acos},{token:"atan",show:"atan",type:0,value:D.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:D.math.cosh},{token:"acosh",show:"acosh",type:0,value:D.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:D.math.div},{token:"!",show:"!",type:7,value:D.math.fact},{token:"tanh",show:"tanh",type:0,value:D.math.tanh},{token:"atanh",show:"atanh",type:0,value:D.math.atanh},{token:"Mod",show:" Mod ",type:2,value:D.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:D.math.mul},{token:"sinh",show:"sinh",type:0,value:D.math.sinh},{token:"asinh",show:"asinh",type:0,value:D.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:D.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:D.math.add},{token:"-",show:"-",type:9,value:D.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:D.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:D.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:D.math.and}],$$={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11};for(C0=0;C0<s.length;C0++)s[C0].precedence=$$[s[C0].type];var C0,d={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},O0={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},m6={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},l={},f0={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},Z6={1:!0},g=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];D.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14};D.addToken=function($){for(var Q=0;Q<$.length;Q++){var W=$[Q].token.length,J=-1;if($[Q].type===D.tokenTypes.FUNCTION_WITH_N_ARGS&&$[Q].numberOfArguments===void 0)$[Q].numberOfArguments=2;g[W]=g[W]||[];for(var Y=0;Y<g[W].length;Y++)if($[Q].token===g[W][Y]){J=A$(g[W][Y],s);break}if(J===-1){if(s.push($[Q]),$[Q].precedence=$$[$[Q].type],g.length<=$[Q].token.length)g[$[Q].token.length]=[];g[$[Q].token.length].push($[Q].token)}else s[J]=$[Q],$[Q].precedence=$$[$[Q].type]}};var u6={value:D.math.changeSign,type:0,pre:21,show:"-"},c0={value:")",show:")",type:5,pre:0},A0={value:"(",type:4,pre:0,show:"("};D.lex=function($,Q){var W=[A0],J=[],Y=$,H=d,q=0,z=l,X="",B;if(typeof Q!=="undefined")D.addToken(Q);var U={},E=l6(Y);for(B=0;B<E.length;B++){var S=E[B];if(S.type===14){if(B>0&&B<E.length-1&&E[B+1].type===1&&(E[B-1].type===1||E[B-1].type===6))throw new D.Exception("Unexpected Space");continue}var{token:F,type:v,value:C,precedence:m,show:B0}=S,b=W[W.length-1],S0;for(S0=J.length;S0--;)if(J[S0]===0){if([0,2,3,4,5,9,11,12,13].indexOf(v)!==-1){if(H[v]!==!0)throw new D.Exception(F+" is not allowed after "+X);W.push(c0),H=O0,z=f0,J.pop()}}else break;if(H[v]!==!0)throw new D.Exception(F+" is not allowed after "+X);if(z[v]===!0)v=2,C=D.math.mul,B0="&times;",m=3,B=B-1;if(U={value:C,type:v,pre:m,show:B0,numberOfArguments:S.numberOfArguments},v===0){if(H=d,z=l,k(J,2),W.push(U),E[B+1].type!==4)W.push(A0),J.push(2)}else if(v===1){if(b.type===1)b.value+=C,k(J,1);else W.push(U);H=O0,z=m6}else if(v===2)H=d,z=l,k(J,2),W.push(U);else if(v===3)W.push(U),H=O0,z=f0;else if(v===4)k(J,1),q++,H=d,z=l,W.push(U);else if(v===5){if(!q)throw new D.Exception("Closing parenthesis are more than opening one, wait What!!!");q--,H=O0,z=f0,W.push(U),k(J,1)}else if(v===6){if(b.hasDec)throw new D.Exception("Two decimals are not allowed in one number");if(b.type!==1)b={value:0,type:1,pre:0},W.push(b);H=Z6,k(J,1),z=l,b.value+=C,b.hasDec=!0}else if(v===7)H=O0,z=f0,k(J,1),W.push(U);if(v===8){if(H=d,z=l,k(J,S.numberOfArguments+2),W.push(U),E[B+1].type!==4)W.push(A0),J.push(S.numberOfArguments+2)}else if(v===9){if(b.type===9){if(b.value===D.math.add)b.value=C,b.show=B0,k(J,1);else if(b.value===D.math.sub&&B0==="-")b.value=D.math.add,b.show="+",k(J,1)}else if(b.type!==5&&b.type!==7&&b.type!==1&&b.type!==3&&b.type!==13){if(F==="-")H=d,z=l,k(J,2).push(2),W.push(u6),W.push(A0)}else W.push(U),k(J,2);H=d,z=l}else if(v===10)H=d,z=l,k(J,2),W.push(U);else if(v===11)H=d,z=l,W.push(U);else if(v===12){if(H=d,z=l,k(J,6),W.push(U),E[B+1].type!==4)W.push(A0),J.push(6)}else if(v===13)H=O0,z=f0,W.push(U);k(J,-1),X=F}for(S0=J.length;S0--;)W.push(c0);if(H[5]!==!0)throw new D.Exception("complete the expression");while(q--)W.push(c0);return W.push(c0),new D(W)};I$.exports=D});var h$=E0((s8,P$)=>{var Q$=b$();Q$.prototype.toPostfix=function(){var $=[],Q,W,J,Y,H,q=[{value:"(",type:4,pre:0}],z=this.value;for(var X=1;X<z.length;X++)if(z[X].type===1||z[X].type===3||z[X].type===13){if(z[X].type===1)z[X].value=Number(z[X].value);$.push(z[X])}else if(z[X].type===4)q.push(z[X]);else if(z[X].type===5)while((W=q.pop()).type!==4)$.push(W);else if(z[X].type===11){while((W=q.pop()).type!==4)$.push(W);q.push(W)}else{Q=z[X],Y=Q.pre,H=q[q.length-1],J=H.pre;var B=H.value=="Math.pow"&&Q.value=="Math.pow";if(Y>J)q.push(Q);else{while(J>=Y&&!B||B&&Y<J)W=q.pop(),H=q[q.length-1],$.push(W),J=H.pre,B=Q.value=="Math.pow"&&H.value=="Math.pow";q.push(Q)}}return new Q$($)};P$.exports=Q$});var g$=E0((t8,k$)=>{var I0=h$();I0.prototype.postfixEval=function($){$=$||{},$.PI=Math.PI,$.E=Math.E;var Q=[],W,J,Y,H=[],q="",z=this.value,X=typeof $.n!=="undefined";for(var B=0;B<z.length;B++)if(z[B].type===1)Q.push({value:z[B].value,type:1});else if(z[B].type===3)Q.push({value:$[z[B].value],type:1});else if(z[B].type===0)if(typeof Q[Q.length-1].type==="undefined")Q[Q.length-1].value.push(z[B]);else Q[Q.length-1].value=z[B].value(Q[Q.length-1].value);else if(z[B].type===7)if(typeof Q[Q.length-1].type==="undefined")Q[Q.length-1].value.push(z[B]);else Q[Q.length-1].value=z[B].value(Q[Q.length-1].value);else if(z[B].type===8){var U=[];for(var E=0;E<z[B].numberOfArguments;E++)U.push(Q.pop().value);Q.push({type:1,value:z[B].value.apply(z[B],U.reverse())})}else if(z[B].type===10)if(W=Q.pop(),J=Q.pop(),typeof J.type==="undefined")J.value=J.concat(W),J.value.push(z[B]),Q.push(J);else if(typeof W.type==="undefined")W.unshift(J),W.push(z[B]),Q.push(W);else Q.push({type:1,value:z[B].value(J.value,W.value)});else if(z[B].type===2||z[B].type===9)if(W=Q.pop(),J=Q.pop(),typeof J.type==="undefined")J=J.concat(W),J.push(z[B]),Q.push(J);else if(typeof W.type==="undefined")W.unshift(J),W.push(z[B]),Q.push(W);else Q.push({type:1,value:z[B].value(J.value,W.value)});else if(z[B].type===12){if(W=Q.pop(),typeof W.type!=="undefined")W=[W];J=Q.pop(),Y=Q.pop(),Q.push({type:1,value:z[B].value(Y.value,J.value,new I0(W))})}else if(z[B].type===13)if(X)Q.push({value:$[z[B].value],type:3});else Q.push([z[B]]);if(Q.length>1)throw new I0.Exception("Uncaught Syntax error");return Q[0].value>1000000000000000?"Infinity":parseFloat(Q[0].value.toFixed(15))};I0.eval=function($,Q,W){if(typeof Q==="undefined")return this.lex($).toPostfix().postfixEval();else if(typeof W==="undefined")if(typeof Q.length!=="undefined")return this.lex($,Q).toPostfix().postfixEval();else return this.lex($).toPostfix().postfixEval(Q);else return this.lex($,Q).toPostfix().postfixEval(W)};k$.exports=I0});var m$=E0((e8,x$)=>{var T$=g$();T$.prototype.formulaEval=function(){var $=[],Q,W,J,Y=[],H="",q=this.value;for(var z=0;z<q.length;z++)if(q[z].type===1||q[z].type===3)Y.push({value:q[z].type===3?q[z].show:q[z].value,type:1});else if(q[z].type===13)Y.push({value:q[z].show,type:1});else if(q[z].type===0)Y[Y.length-1]={value:q[z].show+(q[z].show!="-"?"(":"")+Y[Y.length-1].value+(q[z].show!="-"?")":""),type:0};else if(q[z].type===7)Y[Y.length-1]={value:(Y[Y.length-1].type!=1?"(":"")+Y[Y.length-1].value+(Y[Y.length-1].type!=1?")":"")+q[z].show,type:7};else if(q[z].type===10)if(Q=Y.pop(),W=Y.pop(),q[z].show==="P"||q[z].show==="C")Y.push({value:"<sup>"+W.value+"</sup>"+q[z].show+"<sub>"+Q.value+"</sub>",type:10});else Y.push({value:(W.type!=1?"(":"")+W.value+(W.type!=1?")":"")+"<sup>"+Q.value+"</sup>",type:1});else if(q[z].type===2||q[z].type===9)Q=Y.pop(),W=Y.pop(),Y.push({value:(W.type!=1?"(":"")+W.value+(W.type!=1?")":"")+q[z].show+(Q.type!=1?"(":"")+Q.value+(Q.type!=1?")":""),type:q[z].type});else if(q[z].type===12)Q=Y.pop(),W=Y.pop(),J=Y.pop(),Y.push({value:q[z].show+"("+J.value+","+W.value+","+Q.value+")",type:12});return Y[0].value};x$.exports=T$});var M8=2,l0={free_hands:2,heroic_creativity_bonus:3,actions_on_turn:3,reactions_on_turn:1},N$=[{attr:"agi",eq:"agi - agi_dmg"},{attr:"cha",eq:"cha - cha_dmg"},{attr:"dex",eq:"dex - dex_dmg"},{attr:"int",eq:"int - int_dmg"},{attr:"per",eq:"per - per_dmg"},{attr:"spi",eq:"spi - spi_dmg"},{attr:"str",eq:"str - str_dmg"},{attr:"tek",eq:"tek - tek_dmg"},{attr:"wis",eq:"wis - wis_dmg"}],j$=[{attr:"max_hp",eq:"max_hp + 20 + (xp / 1000) + (3 * str)"},{attr:"max_vim",eq:"max_vim + 20 + (xp / 1000) + (str * agi)"},{attr:"max_mp",eq:"max_mp + 6 + (3 * wis)"},{attr:"max_alerts",eq:"max_alerts + agi + per"},{attr:"init",eq:"init + agi + dex"},{attr:"speed",eq:"speed + 3 + agi - burden"}];var v$=($,Q)=>{const W=$.custom_fields?.keys;if(!W)return Q;return Object.entries(W).reduce((J,[Y,H])=>{const q=G0(H,J);if(q)J[Y]={val:q};return J},{...Q})};var S6=($)=>{switch($){case"equals":return(Q,W)=>Q===W;case"gte":return(Q,W)=>parseInt(Q)>=parseInt(W);case"gt":return(Q,W)=>parseInt(Q)>parseInt(W);case"lte":return(Q,W)=>parseInt(Q)<=parseInt(W);case"lt":return(Q,W)=>parseInt(Q)<parseInt(W);default:return()=>!1}},E6=($,Q,W,J)=>{if($.operator==="every")return $.tests.every((Y)=>R0(Y,Q,W,J));else if($.operator==="some")return $.tests.some((Y)=>R0(Y,Q,W,J));return!1},C6=($,Q)=>{if(!Q)return!0;let W=Q;for(let J of $.path){if(typeof $!=="object"||!$)break;W=W[J]}if(typeof W==="string")return W;else if(typeof W==="number")return W.toString();return!1},M$=($,Q,W,J)=>{switch($.type){case"ability_field":return C6($,W);case"attr":return J[$.attr]?.val.toString()??!1;case"const":return $.const;case"equation":return G0($.equation,J)?.toString()??!1;case"key":return(Q.custom_fields?.keys??{})[$.key]??!1;default:return!1}},f6=($,Q,W,J)=>{const Y=M$($.left,Q,W,J);if(typeof Y==="boolean")return Y;const H=M$($.right,Q,W,J);if(typeof H==="boolean")return H;return S6($.operator)(Y,H)},A6=($)=>{if($.custom_fields?.cast_dl||$.custom_fields?.mp_cost)return!0;const W=$.custom_fields?.path;if(W){const J=["Arcana","Spellcaster","Magician","Wizard"].some((Y)=>W.includes(Y));return Boolean(J&&$.custom_fields?.cost?.mp)}return!1},I6=($,Q)=>{if(!Q)return!0;switch($.name){case"isSpell":return A6(Q);default:return!1}},R0=($,Q,W,J)=>{switch($.type){case"base":return E6($,Q,W,J);case"comp":return f6($,Q,W,J);case"special":return I6($,W);default:return!1}};var V$=($,Q,W=0,J={},Y="")=>{let H="";if(typeof W==="string")H=W;else if(W>0)H=`+${W}`;else if(W<0)H=W.toString();let q="";if(J.heroic_creativity_bonus)q=(J.heroic_creativity_bonus>0?"+":"")+J.heroic_creativity_bonus.toString();let z=0,X=0;const B={discord:"",roll20:"",web:""};if(J.explodes)B.discord=" ie6",B.roll20="!",B.web="!";const U={discord:"",roll20:"",web:""};if(J.rr1s)U.discord=" ir1",U.roll20="r",U.web="r";let E="";if(J.fatigued)E="-1";let S="";if(J.end)S=J.end;if(J.flow)$+=J.flow,z+=J.flow;if(J.ebb)$+=J.ebb,X+=J.ebb;if(J.drop)z+=J.drop;const F=z===0?{discord:"",roll20:"",web:""}:{discord:` d${z}`,roll20:`dl${z}`,web:`dl${z}`},v=X===0?{discord:"",roll20:"",web:""}:{discord:` kl${$-X}`,roll20:`dh${X}`,web:`dh${X}`},C=!Y?{discord:"",roll20:"",web:""}:{discord:` ! ${Y}`,roll20:` [${Y}]`,web:""};return{discord:$+"d"+Q+B.discord+U.discord+F.discord+v.discord+" "+H+E+q+S+C.discord,roll20:$+"d"+Q+B.roll20+U.roll20+F.roll20+v.roll20+H+E+q+S+C.roll20,web:$+"d"+Q+B.web+U.web+F.web+v.web+H+E+q+S+C.web,settings:{...J,adjust:W,count:$,sides:Q}}},h8=($,Q,W={},J={},Y="",H="")=>{const q=$[Q],z=q?q.val:0;let X={...W};return X=S$(X,J,$,[Q],H),V$(X.count??3,X.sides??6,z,X,Y)},k8=($,Q={},W="",J={},Y,H)=>{const q=$.match(/\(?(\d+)\)?d(\d+)/u);if(!q||q.length<3)return;const z=parseInt(q[1]),X=parseInt(q[2]);if(isNaN(z)||isNaN(X))return;const B=$.substring(q[0].length);let U={...Q};if(Y&&H)U=S$(U,J,Y,H);return V$(z,X,B,U,W)},S$=($,Q,W,J,Y="")=>{return Object.entries(Q).forEach(([H,q])=>{if($.otherToggles&&($.otherToggles[H]?.toggled??q.default)&&q.attr&&J.includes(q.attr)&&Y!==H)$=u0($,q.setting,W)}),$},g8=($,Q,W)=>Q.reduce((J,Y)=>{const H=W[Y];if(!H?.dice)return J;return u0(J,H.dice,W)},$),T8=($,Q)=>{const W={},J=(Y,H)=>{if(!H)return;const z={setting:H.dice_settings??{end:H.bonus},attr:H.attr,label:H.label};W[Y]=z};return $.abilities.forEach((Y)=>{const H=Y.uses?.criteria_benefits?.filter((q)=>q.check&&R0(q.criteria,Y,null,Q)).map((q)=>q.check)??[];H.push(Y.uses?.check),H.forEach((q)=>{J(Y.name,q)})}),$.items.filter((Y)=>(Y.active||Y.type==="equipment")&&!Y.custom_fields?.in_storage).forEach((Y)=>{J(Y.name,Y.uses?.check)}),W},u0=($,Q,W)=>{const J={...$};if(Q.count)J.count=(J.count??3)+Q.count;if(Q.sides)J.sides=(J.sides??6)+Q.sides;if(Q.drop)J.drop=(J.drop??0)+Q.drop;if(Q.ebb)J.ebb=(J.ebb??0)+Q.ebb;if(Q.flow)J.flow=(J.flow??0)+Q.flow;if(Q.end)J.end=t0(`${J.end??""}${Q.end}`,W).cleanedEquation;if(Q.explodes)J.explodes=!0;if(Q.rr1s)J.rr1s=!0;if(Q.fatigued)J.fatigued=!0;return J};var b6=10,P6=20,h6=30,k6=40,g6=50,T6=60,x6=1000,E$=1e4,e0=($,Q)=>{let W=0;if(typeof Q==="string")W=new RegExp(`^\\s*${$}\\s*[+-]`,"u").test(Q)?2:4;switch($){case"agi_dmg":case"cha_dmg":case"dex_dmg":case"int_dmg":case"per_dmg":case"spi_dmg":case"str_dmg":case"tek_dmg":case"wis_dmg":return b6+W;case"per":case"tek":case"agi":case"dex":case"int":case"spi":case"str":case"wis":case"cha":return P6+W;case"xp":case"sp":return h6+W;case"hp":case"max_hp":case"vim":case"max_vim":case"mp":case"max_mp":case"hero":case"max_hero":case"alerts":case"max_alerts":return k6+W;case"armor":case"shield":case"burden":return g6+W;case"init":case"speed":case"casting":case"bluespace":case"actions":case"reactions":case"actions_on_turn":case"reactions_on_turn":case"heroic_creativity_bonus":case"free_hands":case"recovery_shock":return T6+W;default:return x6+W}},c8=($)=>{const Q={},W=(q,z)=>{Object.entries(q).forEach(([X,B])=>{Q[X]={val:B,base:B,reason:[{val:B,src:z}]}})};W(l0,"Default"),W($.entity.attributes,"Base Value");const J=[...N$,...$.entity.type==="CHARACTER"?j$:[]].map(({attr:q,eq:z})=>({attr:q,adjust:z,order:e0(q,z),builtIn:!0}));$.items.forEach((q)=>{if(!q.uses?.adjust||!(q.active||q.type==="equipment")||q.custom_fields?.in_storage)return;const z={type:"item",item:q};if(q.uses.adjust.attr)Object.entries(q.uses.adjust.attr).forEach(([X,B])=>{const U=q.uses?.adjust?.order??e0(X,B);J.push({attr:X,adjust:B,order:U,src:z})});if(q.uses.adjust.dice)Object.entries(q.uses.adjust.dice).forEach(([X,B])=>{const U=q.uses?.adjust?.order??E$;J.push({attr:X,adjust:B,order:U,src:z})})}),$.abilities.forEach((q,z)=>{const X=q.uses?.criteria_benefits?.filter((B)=>B.adjust).map((B,U)=>({adjust:B.adjust,check:B.criteria,checkId:`${z}_${U}`}))??[];X.push({adjust:q.uses?.adjust}),X.forEach(({adjust:B,check:U,checkId:E})=>{if(!B||B.time!=="permanent"&&!q.active)return;const S={type:"ability",ability:q},F=U&&E?{id:E,check:U}:void 0;if(B.attr)Object.entries(B.attr).forEach(([v,C])=>{const m=B?.order??e0(v,C);J.push({attr:v,adjust:C,order:m,src:S,criteria:F})});if(B.dice)Object.entries(B.dice).forEach(([v,C])=>{const m=B?.order??E$;J.push({attr:v,adjust:C,order:m,src:S,criteria:F})})})}),J.sort((q,z)=>q.order-z.order);const Y=(q,z,X,B)=>{const U={val:Q[q].val,src:z,...X&&{itemId:X},...B&&{abilityId:B}},E=Q[q].reason;if(E)E.push(U);else Q[q].reason=[U]},H={};return J.forEach(({attr:q,adjust:z,src:X,criteria:B,builtIn:U})=>{if(B&&X?.type==="ability"){let C=H[B.id];if(typeof C!=="boolean")C=R0(B.check,X.ability,null,Q),H[B.id]=C;if(!C)return}if(!Q[q])Q[q]={val:0};let S=null,F=void 0,v=void 0;if(X?.type==="item")S=X.item.name,F=X.item.id;else if(X?.type==="ability")S=X.ability.name,v=X.ability.id;else if(U)S="Base Equations";if(typeof z==="number"){Q[q].val+=z;const C=`${q} ${z>=0?"+":"-"} ${Math.abs(z)} ${S?`(From ${S})`:""}`;Y(q,C,F,v)}else{const C=X?.type==="ability"?v$(X.ability,Q):Q;if(typeof z==="string"){const m=G0(z,C);if(m){Q[q].val=m;const B0=`${z} ${S?`(From ${S})`:""}`;Y(q,B0,F,v)}}else{const m=Q[q].dice;if(m)Q[q].dice=u0(m,z,C);else Q[q].dice=z}}}),Q};var o8=($)=>({entity:{...$.entity,other_fields:{}},abilities:$.abilities.filter((Q)=>Q.uses).map((Q)=>({...Q,effect:"",comment:null})),items:$.items.filter((Q)=>Q.uses).map((Q)=>({...Q,desc:"",comment:null})),text:[],flux:[]});var y$=V6(m$(),1),c6=($)=>{return Array.from(new Set([...l$,...Object.keys($)])).map((W)=>`\\b${W}\\b`).join("|")},n6=($)=>new RegExp(c6($),"g"),Z$=($)=>{const Q=$.toString();if($<0)return`(${Q})`;return Q},t0=($,Q)=>{let W=!1;return{cleanedEquation:$.replaceAll(n6(Q),(Y)=>{const H=Y;if(H==="L")W=!0;const q=Q[H];if(q)return Z$(q.val);const z=l0[H];if(z)return Z$(z);return"0"}),details:{ceilResult:W}}},G0=($,Q)=>{const{cleanedEquation:W,details:{ceilResult:J}}=t0($,Q);if(/^(?:[\d+\-*/()^ ]|Mod)+$/.test(W))try{const Y=y$.default.eval(W),H=parseFloat(Y);if(isNaN(H)){console.warn(`equation did not successfully solve: ${$} -> ${W} -> ${Y}`);return}if(J)return Math.ceil(H);return Math.floor(H)}catch{console.warn(`solving equation failed: ${$} -> ${W}`)}return},qQ=($,Q)=>{const W={};return Object.entries($).forEach(([J,Y])=>{if(typeof Y==="string"){const H=G0(Y,Q);if(H)W[J]=H}else W[J]=Y}),W};var zQ=($)=>$.toLowerCase().replaceAll(/^[a-z]|(?<=_)[a-z]/gm,(Q)=>Q.toUpperCase()).replaceAll("_"," ");var d6=function($){n$=$},p0=function(){return n$},_=function($,Q){const W=d0({issueData:Q,data:$.data,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,p0(),b0].filter((J)=>!!J)});$.common.issues.push(W)},N=function($){if(!$)return{};const{errorMap:Q,invalid_type_error:W,required_error:J,description:Y}=$;if(Q&&(W||J))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(Q)return{errorMap:Q,description:Y};return{errorMap:(q,z)=>{if(q.code!=="invalid_type")return{message:z.defaultError};if(typeof z.data==="undefined")return{message:J!==null&&J!==void 0?J:z.defaultError};return{message:W!==null&&W!==void 0?W:z.defaultError}},description:Y}},J5=function($,Q){if((Q==="v4"||!Q)&&$5.test($))return!0;if((Q==="v6"||!Q)&&Q5.test($))return!0;return!1},Y5=function($,Q){const W=($.toString().split(".")[1]||"").length,J=(Q.toString().split(".")[1]||"").length,Y=W>J?W:J,H=parseInt($.toFixed(Y).replace(".","")),q=parseInt(Q.toFixed(Y).replace(".",""));return H%q/Math.pow(10,Y)},_0=function($){if($ instanceof f){const Q={};for(let W in $.shape){const J=$.shape[W];Q[W]=o.create(_0(J))}return new f({...$._def,shape:()=>Q})}else if($ instanceof c)return new c({...$._def,type:_0($.element)});else if($ instanceof o)return o.create(_0($.unwrap()));else if($ instanceof J0)return J0.create(_0($.unwrap()));else if($ instanceof i)return i.create($.items.map((Q)=>_0(Q)));else return $},q$=function($,Q){const W=t($),J=t(Q);if($===Q)return{valid:!0,data:$};else if(W===O.object&&J===O.object){const Y=M.objectKeys(Q),H=M.objectKeys($).filter((z)=>Y.indexOf(z)!==-1),q={...$,...Q};for(let z of H){const X=q$($[z],Q[z]);if(!X.valid)return{valid:!1};q[z]=X.data}return{valid:!0,data:q}}else if(W===O.array&&J===O.array){if($.length!==Q.length)return{valid:!1};const Y=[];for(let H=0;H<$.length;H++){const q=$[H],z=Q[H],X=q$(q,z);if(!X.valid)return{valid:!1};Y.push(X.data)}return{valid:!0,data:Y}}else if(W===O.date&&J===O.date&&+$===+Q)return{valid:!0,data:$};else return{valid:!1}},d$=function($,Q){return new W0({values:$,typeName:w.ZodEnum,...N(Q)})},M;(function($){$.assertEqual=(Y)=>Y;function Q(Y){}$.assertIs=Q;function W(Y){throw new Error}$.assertNever=W,$.arrayToEnum=(Y)=>{const H={};for(let q of Y)H[q]=q;return H},$.getValidEnumValues=(Y)=>{const H=$.objectKeys(Y).filter((z)=>typeof Y[Y[z]]!=="number"),q={};for(let z of H)q[z]=Y[z];return $.objectValues(q)},$.objectValues=(Y)=>{return $.objectKeys(Y).map(function(H){return Y[H]})},$.objectKeys=typeof Object.keys==="function"?(Y)=>Object.keys(Y):(Y)=>{const H=[];for(let q in Y)if(Object.prototype.hasOwnProperty.call(Y,q))H.push(q);return H},$.find=(Y,H)=>{for(let q of Y)if(H(q))return q;return},$.isInteger=typeof Number.isInteger==="function"?(Y)=>Number.isInteger(Y):(Y)=>typeof Y==="number"&&isFinite(Y)&&Math.floor(Y)===Y;function J(Y,H=" | "){return Y.map((q)=>typeof q==="string"?`'${q}'`:q).join(H)}$.joinValues=J,$.jsonStringifyReplacer=(Y,H)=>{if(typeof H==="bigint")return H.toString();return H}})(M||(M={}));var J$;(function($){$.mergeShapes=(Q,W)=>{return{...Q,...W}}})(J$||(J$={}));var O=M.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t=($)=>{switch(typeof $){case"undefined":return O.undefined;case"string":return O.string;case"number":return isNaN($)?O.nan:O.number;case"boolean":return O.boolean;case"function":return O.function;case"bigint":return O.bigint;case"symbol":return O.symbol;case"object":if(Array.isArray($))return O.array;if($===null)return O.null;if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return O.promise;if(typeof Map!=="undefined"&&$ instanceof Map)return O.map;if(typeof Set!=="undefined"&&$ instanceof Set)return O.set;if(typeof Date!=="undefined"&&$ instanceof Date)return O.date;return O.object;default:return O.unknown}},R=M.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),p6=($)=>{return JSON.stringify($,null,2).replace(/"([^"]+)":/g,"$1:")};class Z extends Error{constructor($){super();this.issues=[],this.addIssue=(W)=>{this.issues=[...this.issues,W]},this.addIssues=(W=[])=>{this.issues=[...this.issues,...W]};const Q=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,Q);else this.__proto__=Q;this.name="ZodError",this.issues=$}get errors(){return this.issues}format($){const Q=$||function(Y){return Y.message},W={_errors:[]},J=(Y)=>{for(let H of Y.issues)if(H.code==="invalid_union")H.unionErrors.map(J);else if(H.code==="invalid_return_type")J(H.returnTypeError);else if(H.code==="invalid_arguments")J(H.argumentsError);else if(H.path.length===0)W._errors.push(Q(H));else{let q=W,z=0;while(z<H.path.length){const X=H.path[z];if(z!==H.path.length-1)q[X]=q[X]||{_errors:[]};else q[X]=q[X]||{_errors:[]},q[X]._errors.push(Q(H));q=q[X],z++}}};return J(this),W}toString(){return this.message}get message(){return JSON.stringify(this.issues,M.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten($=(Q)=>Q.message){const Q={},W=[];for(let J of this.issues)if(J.path.length>0)Q[J.path[0]]=Q[J.path[0]]||[],Q[J.path[0]].push($(J));else W.push($(J));return{formErrors:W,fieldErrors:Q}}get formErrors(){return this.flatten()}}Z.create=($)=>{return new Z($)};var b0=($,Q)=>{let W;switch($.code){case R.invalid_type:if($.received===O.undefined)W="Required";else W=`Expected ${$.expected}, received ${$.received}`;break;case R.invalid_literal:W=`Invalid literal value, expected ${JSON.stringify($.expected,M.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:W=`Unrecognized key(s) in object: ${M.joinValues($.keys,", ")}`;break;case R.invalid_union:W="Invalid input";break;case R.invalid_union_discriminator:W=`Invalid discriminator value. Expected ${M.joinValues($.options)}`;break;case R.invalid_enum_value:W=`Invalid enum value. Expected ${M.joinValues($.options)}, received '${$.received}'`;break;case R.invalid_arguments:W="Invalid function arguments";break;case R.invalid_return_type:W="Invalid function return type";break;case R.invalid_date:W="Invalid date";break;case R.invalid_string:if(typeof $.validation==="object")if("includes"in $.validation){if(W=`Invalid input: must include "${$.validation.includes}"`,typeof $.validation.position==="number")W=`${W} at one or more positions greater than or equal to ${$.validation.position}`}else if("startsWith"in $.validation)W=`Invalid input: must start with "${$.validation.startsWith}"`;else if("endsWith"in $.validation)W=`Invalid input: must end with "${$.validation.endsWith}"`;else M.assertNever($.validation);else if($.validation!=="regex")W=`Invalid ${$.validation}`;else W="Invalid";break;case R.too_small:if($.type==="array")W=`Array must contain ${$.exact?"exactly":$.inclusive?"at least":"more than"} ${$.minimum} element(s)`;else if($.type==="string")W=`String must contain ${$.exact?"exactly":$.inclusive?"at least":"over"} ${$.minimum} character(s)`;else if($.type==="number")W=`Number must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${$.minimum}`;else if($.type==="date")W=`Date must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${new Date(Number($.minimum))}`;else W="Invalid input";break;case R.too_big:if($.type==="array")W=`Array must contain ${$.exact?"exactly":$.inclusive?"at most":"less than"} ${$.maximum} element(s)`;else if($.type==="string")W=`String must contain ${$.exact?"exactly":$.inclusive?"at most":"under"} ${$.maximum} character(s)`;else if($.type==="number")W=`Number must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="bigint")W=`BigInt must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="date")W=`Date must be ${$.exact?"exactly":$.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number($.maximum))}`;else W="Invalid input";break;case R.custom:W="Invalid input";break;case R.invalid_intersection_types:W="Intersection results could not be merged";break;case R.not_multiple_of:W=`Number must be a multiple of ${$.multipleOf}`;break;case R.not_finite:W="Number must be finite";break;default:W=Q.defaultError,M.assertNever($)}return{message:W}},n$=b0,d0=($)=>{const{data:Q,path:W,errorMaps:J,issueData:Y}=$,H=[...W,...Y.path||[]],q={...Y,path:H};let z="";const X=J.filter((B)=>!!B).slice().reverse();for(let B of X)z=B(q,{data:Q,defaultError:z}).message;return{...Y,path:H,message:Y.message||z}},o6=[];class P{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray($,Q){const W=[];for(let J of Q){if(J.status==="aborted")return K;if(J.status==="dirty")$.dirty();W.push(J.value)}return{status:$.value,value:W}}static async mergeObjectAsync($,Q){const W=[];for(let J of Q)W.push({key:await J.key,value:await J.value});return P.mergeObjectSync($,W)}static mergeObjectSync($,Q){const W={};for(let J of Q){const{key:Y,value:H}=J;if(Y.status==="aborted")return K;if(H.status==="aborted")return K;if(Y.status==="dirty")$.dirty();if(H.status==="dirty")$.dirty();if(Y.value!=="__proto__"&&(typeof H.value!=="undefined"||J.alwaysSet))W[Y.value]=H.value}return{status:$.value,value:W}}}var K=Object.freeze({status:"aborted"}),p$=($)=>({status:"dirty",value:$}),T=($)=>({status:"valid",value:$}),Y$=($)=>$.status==="aborted",G$=($)=>$.status==="dirty",P0=($)=>$.status==="valid",o0=($)=>typeof Promise!=="undefined"&&$ instanceof Promise,L;(function($){$.errToObj=(Q)=>typeof Q==="string"?{message:Q}:Q||{},$.toString=(Q)=>typeof Q==="string"?Q:Q===null||Q===void 0?void 0:Q.message})(L||(L={}));class n{constructor($,Q,W,J){this._cachedPath=[],this.parent=$,this.data=Q,this._path=W,this._key=J}get path(){if(!this._cachedPath.length)if(this._key instanceof Array)this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var u$=($,Q)=>{if(P0(Q))return{success:!0,data:Q.value};else{if(!$.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const W=new Z($.common.issues);return this._error=W,this._error}}}};class j{constructor($){this.spa=this.safeParseAsync,this._def=$,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType($){return t($.data)}_getOrReturnCtx($,Q){return Q||{common:$.parent.common,data:$.data,parsedType:t($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}_processInputParams($){return{status:new P,ctx:{common:$.parent.common,data:$.data,parsedType:t($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}}_parseSync($){const Q=this._parse($);if(o0(Q))throw new Error("Synchronous parse encountered promise.");return Q}_parseAsync($){const Q=this._parse($);return Promise.resolve(Q)}parse($,Q){const W=this.safeParse($,Q);if(W.success)return W.data;throw W.error}safeParse($,Q){var W;const J={common:{issues:[],async:(W=Q===null||Q===void 0?void 0:Q.async)!==null&&W!==void 0?W:!1,contextualErrorMap:Q===null||Q===void 0?void 0:Q.errorMap},path:(Q===null||Q===void 0?void 0:Q.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:t($)},Y=this._parseSync({data:$,path:J.path,parent:J});return u$(J,Y)}async parseAsync($,Q){const W=await this.safeParseAsync($,Q);if(W.success)return W.data;throw W.error}async safeParseAsync($,Q){const W={common:{issues:[],contextualErrorMap:Q===null||Q===void 0?void 0:Q.errorMap,async:!0},path:(Q===null||Q===void 0?void 0:Q.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:t($)},J=this._parse({data:$,path:W.path,parent:W}),Y=await(o0(J)?J:Promise.resolve(J));return u$(W,Y)}refine($,Q){const W=(J)=>{if(typeof Q==="string"||typeof Q==="undefined")return{message:Q};else if(typeof Q==="function")return Q(J);else return Q};return this._refinement((J,Y)=>{const H=$(J),q=()=>Y.addIssue({code:R.custom,...W(J)});if(typeof Promise!=="undefined"&&H instanceof Promise)return H.then((z)=>{if(!z)return q(),!1;else return!0});if(!H)return q(),!1;else return!0})}refinement($,Q){return this._refinement((W,J)=>{if(!$(W))return J.addIssue(typeof Q==="function"?Q(W,J):Q),!1;else return!0})}_refinement($){return new y({schema:this,typeName:w.ZodEffects,effect:{type:"refinement",refinement:$}})}superRefine($){return this._refinement($)}optional(){return o.create(this,this._def)}nullable(){return J0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return c.create(this,this._def)}promise(){return X0.create(this,this._def)}or($){return D0.create([this,$],this._def)}and($){return F0.create(this,$,this._def)}transform($){return new y({...N(this._def),schema:this,typeName:w.ZodEffects,effect:{type:"transform",transform:$}})}default($){const Q=typeof $==="function"?$:()=>$;return new M0({...N(this._def),innerType:this,defaultValue:Q,typeName:w.ZodDefault})}brand(){return new H$({typeName:w.ZodBranded,type:this,...N(this._def)})}catch($){const Q=typeof $==="function"?$:()=>$;return new x0({...N(this._def),innerType:this,catchValue:Q,typeName:w.ZodCatch})}describe($){return new this.constructor({...this._def,description:$})}pipe($){return y0.create(this,$)}readonly(){return Z0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var r6=/^c[^\s-]{8,}$/i,i6=/^[a-z][a-z0-9]*$/,a6=/^[0-9A-HJKMNP-TV-Z]{26}$/,s6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,t6=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,e6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",W$,$5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Q5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,W5=($)=>{if($.precision)if($.offset)return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${$.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)\$`);else return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${$.precision}}Z\$`);else if($.precision===0)if($.offset)return new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$");else return new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$");else if($.offset)return new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$");else return new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")};class u extends j{_parse($){if(this._def.coerce)$.data=String($.data);if(this._getType($)!==O.string){const Y=this._getOrReturnCtx($);return _(Y,{code:R.invalid_type,expected:O.string,received:Y.parsedType}),K}const W=new P;let J=void 0;for(let Y of this._def.checks)if(Y.kind==="min"){if($.data.length<Y.value)J=this._getOrReturnCtx($,J),_(J,{code:R.too_small,minimum:Y.value,type:"string",inclusive:!0,exact:!1,message:Y.message}),W.dirty()}else if(Y.kind==="max"){if($.data.length>Y.value)J=this._getOrReturnCtx($,J),_(J,{code:R.too_big,maximum:Y.value,type:"string",inclusive:!0,exact:!1,message:Y.message}),W.dirty()}else if(Y.kind==="length"){const H=$.data.length>Y.value,q=$.data.length<Y.value;if(H||q){if(J=this._getOrReturnCtx($,J),H)_(J,{code:R.too_big,maximum:Y.value,type:"string",inclusive:!0,exact:!0,message:Y.message});else if(q)_(J,{code:R.too_small,minimum:Y.value,type:"string",inclusive:!0,exact:!0,message:Y.message});W.dirty()}}else if(Y.kind==="email"){if(!t6.test($.data))J=this._getOrReturnCtx($,J),_(J,{validation:"email",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="emoji"){if(!W$)W$=new RegExp(e6,"u");if(!W$.test($.data))J=this._getOrReturnCtx($,J),_(J,{validation:"emoji",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="uuid"){if(!s6.test($.data))J=this._getOrReturnCtx($,J),_(J,{validation:"uuid",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="cuid"){if(!r6.test($.data))J=this._getOrReturnCtx($,J),_(J,{validation:"cuid",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="cuid2"){if(!i6.test($.data))J=this._getOrReturnCtx($,J),_(J,{validation:"cuid2",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="ulid"){if(!a6.test($.data))J=this._getOrReturnCtx($,J),_(J,{validation:"ulid",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="url")try{new URL($.data)}catch(H){J=this._getOrReturnCtx($,J),_(J,{validation:"url",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="regex"){if(Y.regex.lastIndex=0,!Y.regex.test($.data))J=this._getOrReturnCtx($,J),_(J,{validation:"regex",code:R.invalid_string,message:Y.message}),W.dirty()}else if(Y.kind==="trim")$.data=$.data.trim();else if(Y.kind==="includes"){if(!$.data.includes(Y.value,Y.position))J=this._getOrReturnCtx($,J),_(J,{code:R.invalid_string,validation:{includes:Y.value,position:Y.position},message:Y.message}),W.dirty()}else if(Y.kind==="toLowerCase")$.data=$.data.toLowerCase();else if(Y.kind==="toUpperCase")$.data=$.data.toUpperCase();else if(Y.kind==="startsWith"){if(!$.data.startsWith(Y.value))J=this._getOrReturnCtx($,J),_(J,{code:R.invalid_string,validation:{startsWith:Y.value},message:Y.message}),W.dirty()}else if(Y.kind==="endsWith"){if(!$.data.endsWith(Y.value))J=this._getOrReturnCtx($,J),_(J,{code:R.invalid_string,validation:{endsWith:Y.value},message:Y.message}),W.dirty()}else if(Y.kind==="datetime"){if(!W5(Y).test($.data))J=this._getOrReturnCtx($,J),_(J,{code:R.invalid_string,validation:"datetime",message:Y.message}),W.dirty()}else if(Y.kind==="ip"){if(!J5($.data,Y.version))J=this._getOrReturnCtx($,J),_(J,{validation:"ip",code:R.invalid_string,message:Y.message}),W.dirty()}else M.assertNever(Y);return{status:W.value,value:$.data}}_regex($,Q,W){return this.refinement((J)=>$.test(J),{validation:Q,code:R.invalid_string,...L.errToObj(W)})}_addCheck($){return new u({...this._def,checks:[...this._def.checks,$]})}email($){return this._addCheck({kind:"email",...L.errToObj($)})}url($){return this._addCheck({kind:"url",...L.errToObj($)})}emoji($){return this._addCheck({kind:"emoji",...L.errToObj($)})}uuid($){return this._addCheck({kind:"uuid",...L.errToObj($)})}cuid($){return this._addCheck({kind:"cuid",...L.errToObj($)})}cuid2($){return this._addCheck({kind:"cuid2",...L.errToObj($)})}ulid($){return this._addCheck({kind:"ulid",...L.errToObj($)})}ip($){return this._addCheck({kind:"ip",...L.errToObj($)})}datetime($){var Q;if(typeof $==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,message:$});return this._addCheck({kind:"datetime",precision:typeof($===null||$===void 0?void 0:$.precision)==="undefined"?null:$===null||$===void 0?void 0:$.precision,offset:(Q=$===null||$===void 0?void 0:$.offset)!==null&&Q!==void 0?Q:!1,...L.errToObj($===null||$===void 0?void 0:$.message)})}regex($,Q){return this._addCheck({kind:"regex",regex:$,...L.errToObj(Q)})}includes($,Q){return this._addCheck({kind:"includes",value:$,position:Q===null||Q===void 0?void 0:Q.position,...L.errToObj(Q===null||Q===void 0?void 0:Q.message)})}startsWith($,Q){return this._addCheck({kind:"startsWith",value:$,...L.errToObj(Q)})}endsWith($,Q){return this._addCheck({kind:"endsWith",value:$,...L.errToObj(Q)})}min($,Q){return this._addCheck({kind:"min",value:$,...L.errToObj(Q)})}max($,Q){return this._addCheck({kind:"max",value:$,...L.errToObj(Q)})}length($,Q){return this._addCheck({kind:"length",value:$,...L.errToObj(Q)})}nonempty($){return this.min(1,L.errToObj($))}trim(){return new u({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new u({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new u({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(($)=>$.kind==="datetime")}get isEmail(){return!!this._def.checks.find(($)=>$.kind==="email")}get isURL(){return!!this._def.checks.find(($)=>$.kind==="url")}get isEmoji(){return!!this._def.checks.find(($)=>$.kind==="emoji")}get isUUID(){return!!this._def.checks.find(($)=>$.kind==="uuid")}get isCUID(){return!!this._def.checks.find(($)=>$.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(($)=>$.kind==="cuid2")}get isULID(){return!!this._def.checks.find(($)=>$.kind==="ulid")}get isIP(){return!!this._def.checks.find(($)=>$.kind==="ip")}get minLength(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $}get maxLength(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $}}u.create=($)=>{var Q;return new u({checks:[],typeName:w.ZodString,coerce:(Q=$===null||$===void 0?void 0:$.coerce)!==null&&Q!==void 0?Q:!1,...N($)})};class $0 extends j{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse($){if(this._def.coerce)$.data=Number($.data);if(this._getType($)!==O.number){const Y=this._getOrReturnCtx($);return _(Y,{code:R.invalid_type,expected:O.number,received:Y.parsedType}),K}let W=void 0;const J=new P;for(let Y of this._def.checks)if(Y.kind==="int"){if(!M.isInteger($.data))W=this._getOrReturnCtx($,W),_(W,{code:R.invalid_type,expected:"integer",received:"float",message:Y.message}),J.dirty()}else if(Y.kind==="min"){if(Y.inclusive?$.data<Y.value:$.data<=Y.value)W=this._getOrReturnCtx($,W),_(W,{code:R.too_small,minimum:Y.value,type:"number",inclusive:Y.inclusive,exact:!1,message:Y.message}),J.dirty()}else if(Y.kind==="max"){if(Y.inclusive?$.data>Y.value:$.data>=Y.value)W=this._getOrReturnCtx($,W),_(W,{code:R.too_big,maximum:Y.value,type:"number",inclusive:Y.inclusive,exact:!1,message:Y.message}),J.dirty()}else if(Y.kind==="multipleOf"){if(Y5($.data,Y.value)!==0)W=this._getOrReturnCtx($,W),_(W,{code:R.not_multiple_of,multipleOf:Y.value,message:Y.message}),J.dirty()}else if(Y.kind==="finite"){if(!Number.isFinite($.data))W=this._getOrReturnCtx($,W),_(W,{code:R.not_finite,message:Y.message}),J.dirty()}else M.assertNever(Y);return{status:J.value,value:$.data}}gte($,Q){return this.setLimit("min",$,!0,L.toString(Q))}gt($,Q){return this.setLimit("min",$,!1,L.toString(Q))}lte($,Q){return this.setLimit("max",$,!0,L.toString(Q))}lt($,Q){return this.setLimit("max",$,!1,L.toString(Q))}setLimit($,Q,W,J){return new $0({...this._def,checks:[...this._def.checks,{kind:$,value:Q,inclusive:W,message:L.toString(J)}]})}_addCheck($){return new $0({...this._def,checks:[...this._def.checks,$]})}int($){return this._addCheck({kind:"int",message:L.toString($)})}positive($){return this._addCheck({kind:"min",value:0,inclusive:!1,message:L.toString($)})}negative($){return this._addCheck({kind:"max",value:0,inclusive:!1,message:L.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:0,inclusive:!0,message:L.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:0,inclusive:!0,message:L.toString($)})}multipleOf($,Q){return this._addCheck({kind:"multipleOf",value:$,message:L.toString(Q)})}finite($){return this._addCheck({kind:"finite",message:L.toString($)})}safe($){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:L.toString($)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:L.toString($)})}get minValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $}get maxValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $}get isInt(){return!!this._def.checks.find(($)=>$.kind==="int"||$.kind==="multipleOf"&&M.isInteger($.value))}get isFinite(){let $=null,Q=null;for(let W of this._def.checks)if(W.kind==="finite"||W.kind==="int"||W.kind==="multipleOf")return!0;else if(W.kind==="min"){if(Q===null||W.value>Q)Q=W.value}else if(W.kind==="max"){if($===null||W.value<$)$=W.value}return Number.isFinite(Q)&&Number.isFinite($)}}$0.create=($)=>{return new $0({checks:[],typeName:w.ZodNumber,coerce:($===null||$===void 0?void 0:$.coerce)||!1,...N($)})};class Q0 extends j{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse($){if(this._def.coerce)$.data=BigInt($.data);if(this._getType($)!==O.bigint){const Y=this._getOrReturnCtx($);return _(Y,{code:R.invalid_type,expected:O.bigint,received:Y.parsedType}),K}let W=void 0;const J=new P;for(let Y of this._def.checks)if(Y.kind==="min"){if(Y.inclusive?$.data<Y.value:$.data<=Y.value)W=this._getOrReturnCtx($,W),_(W,{code:R.too_small,type:"bigint",minimum:Y.value,inclusive:Y.inclusive,message:Y.message}),J.dirty()}else if(Y.kind==="max"){if(Y.inclusive?$.data>Y.value:$.data>=Y.value)W=this._getOrReturnCtx($,W),_(W,{code:R.too_big,type:"bigint",maximum:Y.value,inclusive:Y.inclusive,message:Y.message}),J.dirty()}else if(Y.kind==="multipleOf"){if($.data%Y.value!==BigInt(0))W=this._getOrReturnCtx($,W),_(W,{code:R.not_multiple_of,multipleOf:Y.value,message:Y.message}),J.dirty()}else M.assertNever(Y);return{status:J.value,value:$.data}}gte($,Q){return this.setLimit("min",$,!0,L.toString(Q))}gt($,Q){return this.setLimit("min",$,!1,L.toString(Q))}lte($,Q){return this.setLimit("max",$,!0,L.toString(Q))}lt($,Q){return this.setLimit("max",$,!1,L.toString(Q))}setLimit($,Q,W,J){return new Q0({...this._def,checks:[...this._def.checks,{kind:$,value:Q,inclusive:W,message:L.toString(J)}]})}_addCheck($){return new Q0({...this._def,checks:[...this._def.checks,$]})}positive($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:L.toString($)})}negative($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:L.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:L.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:L.toString($)})}multipleOf($,Q){return this._addCheck({kind:"multipleOf",value:$,message:L.toString(Q)})}get minValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $}get maxValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $}}Q0.create=($)=>{var Q;return new Q0({checks:[],typeName:w.ZodBigInt,coerce:(Q=$===null||$===void 0?void 0:$.coerce)!==null&&Q!==void 0?Q:!1,...N($)})};class L0 extends j{_parse($){if(this._def.coerce)$.data=Boolean($.data);if(this._getType($)!==O.boolean){const W=this._getOrReturnCtx($);return _(W,{code:R.invalid_type,expected:O.boolean,received:W.parsedType}),K}return T($.data)}}L0.create=($)=>{return new L0({typeName:w.ZodBoolean,coerce:($===null||$===void 0?void 0:$.coerce)||!1,...N($)})};class q0 extends j{_parse($){if(this._def.coerce)$.data=new Date($.data);if(this._getType($)!==O.date){const Y=this._getOrReturnCtx($);return _(Y,{code:R.invalid_type,expected:O.date,received:Y.parsedType}),K}if(isNaN($.data.getTime())){const Y=this._getOrReturnCtx($);return _(Y,{code:R.invalid_date}),K}const W=new P;let J=void 0;for(let Y of this._def.checks)if(Y.kind==="min"){if($.data.getTime()<Y.value)J=this._getOrReturnCtx($,J),_(J,{code:R.too_small,message:Y.message,inclusive:!0,exact:!1,minimum:Y.value,type:"date"}),W.dirty()}else if(Y.kind==="max"){if($.data.getTime()>Y.value)J=this._getOrReturnCtx($,J),_(J,{code:R.too_big,message:Y.message,inclusive:!0,exact:!1,maximum:Y.value,type:"date"}),W.dirty()}else M.assertNever(Y);return{status:W.value,value:new Date($.data.getTime())}}_addCheck($){return new q0({...this._def,checks:[...this._def.checks,$]})}min($,Q){return this._addCheck({kind:"min",value:$.getTime(),message:L.toString(Q)})}max($,Q){return this._addCheck({kind:"max",value:$.getTime(),message:L.toString(Q)})}get minDate(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $!=null?new Date($):null}get maxDate(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $!=null?new Date($):null}}q0.create=($)=>{return new q0({checks:[],coerce:($===null||$===void 0?void 0:$.coerce)||!1,typeName:w.ZodDate,...N($)})};class h0 extends j{_parse($){if(this._getType($)!==O.symbol){const W=this._getOrReturnCtx($);return _(W,{code:R.invalid_type,expected:O.symbol,received:W.parsedType}),K}return T($.data)}}h0.create=($)=>{return new h0({typeName:w.ZodSymbol,...N($)})};class w0 extends j{_parse($){if(this._getType($)!==O.undefined){const W=this._getOrReturnCtx($);return _(W,{code:R.invalid_type,expected:O.undefined,received:W.parsedType}),K}return T($.data)}}w0.create=($)=>{return new w0({typeName:w.ZodUndefined,...N($)})};class K0 extends j{_parse($){if(this._getType($)!==O.null){const W=this._getOrReturnCtx($);return _(W,{code:R.invalid_type,expected:O.null,received:W.parsedType}),K}return T($.data)}}K0.create=($)=>{return new K0({typeName:w.ZodNull,...N($)})};class H0 extends j{constructor(){super(...arguments);this._any=!0}_parse($){return T($.data)}}H0.create=($)=>{return new H0({typeName:w.ZodAny,...N($)})};class e extends j{constructor(){super(...arguments);this._unknown=!0}_parse($){return T($.data)}}e.create=($)=>{return new e({typeName:w.ZodUnknown,...N($)})};class r extends j{_parse($){const Q=this._getOrReturnCtx($);return _(Q,{code:R.invalid_type,expected:O.never,received:Q.parsedType}),K}}r.create=($)=>{return new r({typeName:w.ZodNever,...N($)})};class k0 extends j{_parse($){if(this._getType($)!==O.undefined){const W=this._getOrReturnCtx($);return _(W,{code:R.invalid_type,expected:O.void,received:W.parsedType}),K}return T($.data)}}k0.create=($)=>{return new k0({typeName:w.ZodVoid,...N($)})};class c extends j{_parse($){const{ctx:Q,status:W}=this._processInputParams($),J=this._def;if(Q.parsedType!==O.array)return _(Q,{code:R.invalid_type,expected:O.array,received:Q.parsedType}),K;if(J.exactLength!==null){const H=Q.data.length>J.exactLength.value,q=Q.data.length<J.exactLength.value;if(H||q)_(Q,{code:H?R.too_big:R.too_small,minimum:q?J.exactLength.value:void 0,maximum:H?J.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:J.exactLength.message}),W.dirty()}if(J.minLength!==null){if(Q.data.length<J.minLength.value)_(Q,{code:R.too_small,minimum:J.minLength.value,type:"array",inclusive:!0,exact:!1,message:J.minLength.message}),W.dirty()}if(J.maxLength!==null){if(Q.data.length>J.maxLength.value)_(Q,{code:R.too_big,maximum:J.maxLength.value,type:"array",inclusive:!0,exact:!1,message:J.maxLength.message}),W.dirty()}if(Q.common.async)return Promise.all([...Q.data].map((H,q)=>{return J.type._parseAsync(new n(Q,H,Q.path,q))})).then((H)=>{return P.mergeArray(W,H)});const Y=[...Q.data].map((H,q)=>{return J.type._parseSync(new n(Q,H,Q.path,q))});return P.mergeArray(W,Y)}get element(){return this._def.type}min($,Q){return new c({...this._def,minLength:{value:$,message:L.toString(Q)}})}max($,Q){return new c({...this._def,maxLength:{value:$,message:L.toString(Q)}})}length($,Q){return new c({...this._def,exactLength:{value:$,message:L.toString(Q)}})}nonempty($){return this.min(1,$)}}c.create=($,Q)=>{return new c({type:$,minLength:null,maxLength:null,exactLength:null,typeName:w.ZodArray,...N(Q)})};class f extends j{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const $=this._def.shape(),Q=M.objectKeys($);return this._cached={shape:$,keys:Q}}_parse($){if(this._getType($)!==O.object){const X=this._getOrReturnCtx($);return _(X,{code:R.invalid_type,expected:O.object,received:X.parsedType}),K}const{status:W,ctx:J}=this._processInputParams($),{shape:Y,keys:H}=this._getCached(),q=[];if(!(this._def.catchall instanceof r&&this._def.unknownKeys==="strip")){for(let X in J.data)if(!H.includes(X))q.push(X)}const z=[];for(let X of H){const B=Y[X],U=J.data[X];z.push({key:{status:"valid",value:X},value:B._parse(new n(J,U,J.path,X)),alwaysSet:X in J.data})}if(this._def.catchall instanceof r){const X=this._def.unknownKeys;if(X==="passthrough")for(let B of q)z.push({key:{status:"valid",value:B},value:{status:"valid",value:J.data[B]}});else if(X==="strict"){if(q.length>0)_(J,{code:R.unrecognized_keys,keys:q}),W.dirty()}else if(X==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const X=this._def.catchall;for(let B of q){const U=J.data[B];z.push({key:{status:"valid",value:B},value:X._parse(new n(J,U,J.path,B)),alwaysSet:B in J.data})}}if(J.common.async)return Promise.resolve().then(async()=>{const X=[];for(let B of z){const U=await B.key;X.push({key:U,value:await B.value,alwaysSet:B.alwaysSet})}return X}).then((X)=>{return P.mergeObjectSync(W,X)});else return P.mergeObjectSync(W,z)}get shape(){return this._def.shape()}strict($){return L.errToObj,new f({...this._def,unknownKeys:"strict",...$!==void 0?{errorMap:(Q,W)=>{var J,Y,H,q;const z=(H=(Y=(J=this._def).errorMap)===null||Y===void 0?void 0:Y.call(J,Q,W).message)!==null&&H!==void 0?H:W.defaultError;if(Q.code==="unrecognized_keys")return{message:(q=L.errToObj($).message)!==null&&q!==void 0?q:z};return{message:z}}}:{}})}strip(){return new f({...this._def,unknownKeys:"strip"})}passthrough(){return new f({...this._def,unknownKeys:"passthrough"})}extend($){return new f({...this._def,shape:()=>({...this._def.shape(),...$})})}merge($){return new f({unknownKeys:$._def.unknownKeys,catchall:$._def.catchall,shape:()=>({...this._def.shape(),...$._def.shape()}),typeName:w.ZodObject})}setKey($,Q){return this.augment({[$]:Q})}catchall($){return new f({...this._def,catchall:$})}pick($){const Q={};return M.objectKeys($).forEach((W)=>{if($[W]&&this.shape[W])Q[W]=this.shape[W]}),new f({...this._def,shape:()=>Q})}omit($){const Q={};return M.objectKeys(this.shape).forEach((W)=>{if(!$[W])Q[W]=this.shape[W]}),new f({...this._def,shape:()=>Q})}deepPartial(){return _0(this)}partial($){const Q={};return M.objectKeys(this.shape).forEach((W)=>{const J=this.shape[W];if($&&!$[W])Q[W]=J;else Q[W]=J.optional()}),new f({...this._def,shape:()=>Q})}required($){const Q={};return M.objectKeys(this.shape).forEach((W)=>{if($&&!$[W])Q[W]=this.shape[W];else{let Y=this.shape[W];while(Y instanceof o)Y=Y._def.innerType;Q[W]=Y}}),new f({...this._def,shape:()=>Q})}keyof(){return d$(M.objectKeys(this.shape))}}f.create=($,Q)=>{return new f({shape:()=>$,unknownKeys:"strip",catchall:r.create(),typeName:w.ZodObject,...N(Q)})};f.strictCreate=($,Q)=>{return new f({shape:()=>$,unknownKeys:"strict",catchall:r.create(),typeName:w.ZodObject,...N(Q)})};f.lazycreate=($,Q)=>{return new f({shape:$,unknownKeys:"strip",catchall:r.create(),typeName:w.ZodObject,...N(Q)})};class D0 extends j{_parse($){const{ctx:Q}=this._processInputParams($),W=this._def.options;function J(Y){for(let q of Y)if(q.result.status==="valid")return q.result;for(let q of Y)if(q.result.status==="dirty")return Q.common.issues.push(...q.ctx.common.issues),q.result;const H=Y.map((q)=>new Z(q.ctx.common.issues));return _(Q,{code:R.invalid_union,unionErrors:H}),K}if(Q.common.async)return Promise.all(W.map(async(Y)=>{const H={...Q,common:{...Q.common,issues:[]},parent:null};return{result:await Y._parseAsync({data:Q.data,path:Q.path,parent:H}),ctx:H}})).then(J);else{let Y=void 0;const H=[];for(let z of W){const X={...Q,common:{...Q.common,issues:[]},parent:null},B=z._parseSync({data:Q.data,path:Q.path,parent:X});if(B.status==="valid")return B;else if(B.status==="dirty"&&!Y)Y={result:B,ctx:X};if(X.common.issues.length)H.push(X.common.issues)}if(Y)return Q.common.issues.push(...Y.ctx.common.issues),Y.result;const q=H.map((z)=>new Z(z));return _(Q,{code:R.invalid_union,unionErrors:q}),K}}get options(){return this._def.options}}D0.create=($,Q)=>{return new D0({options:$,typeName:w.ZodUnion,...N(Q)})};var n0=($)=>{if($ instanceof N0)return n0($.schema);else if($ instanceof y)return n0($.innerType());else if($ instanceof j0)return[$.value];else if($ instanceof W0)return $.options;else if($ instanceof v0)return Object.keys($.enum);else if($ instanceof M0)return n0($._def.innerType);else if($ instanceof w0)return[void 0];else if($ instanceof K0)return[null];else return null};class r0 extends j{_parse($){const{ctx:Q}=this._processInputParams($);if(Q.parsedType!==O.object)return _(Q,{code:R.invalid_type,expected:O.object,received:Q.parsedType}),K;const W=this.discriminator,J=Q.data[W],Y=this.optionsMap.get(J);if(!Y)return _(Q,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[W]}),K;if(Q.common.async)return Y._parseAsync({data:Q.data,path:Q.path,parent:Q});else return Y._parseSync({data:Q.data,path:Q.path,parent:Q})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create($,Q,W){const J=new Map;for(let Y of Q){const H=n0(Y.shape[$]);if(!H)throw new Error(`A discriminator value for key \`${$}\` could not be extracted from all schema options`);for(let q of H){if(J.has(q))throw new Error(`Discriminator property ${String($)} has duplicate value ${String(q)}`);J.set(q,Y)}}return new r0({typeName:w.ZodDiscriminatedUnion,discriminator:$,options:Q,optionsMap:J,...N(W)})}}class F0 extends j{_parse($){const{status:Q,ctx:W}=this._processInputParams($),J=(Y,H)=>{if(Y$(Y)||Y$(H))return K;const q=q$(Y.value,H.value);if(!q.valid)return _(W,{code:R.invalid_intersection_types}),K;if(G$(Y)||G$(H))Q.dirty();return{status:Q.value,value:q.data}};if(W.common.async)return Promise.all([this._def.left._parseAsync({data:W.data,path:W.path,parent:W}),this._def.right._parseAsync({data:W.data,path:W.path,parent:W})]).then(([Y,H])=>J(Y,H));else return J(this._def.left._parseSync({data:W.data,path:W.path,parent:W}),this._def.right._parseSync({data:W.data,path:W.path,parent:W}))}}F0.create=($,Q,W)=>{return new F0({left:$,right:Q,typeName:w.ZodIntersection,...N(W)})};class i extends j{_parse($){const{status:Q,ctx:W}=this._processInputParams($);if(W.parsedType!==O.array)return _(W,{code:R.invalid_type,expected:O.array,received:W.parsedType}),K;if(W.data.length<this._def.items.length)return _(W,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),K;if(!this._def.rest&&W.data.length>this._def.items.length)_(W,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q.dirty();const Y=[...W.data].map((H,q)=>{const z=this._def.items[q]||this._def.rest;if(!z)return null;return z._parse(new n(W,H,W.path,q))}).filter((H)=>!!H);if(W.common.async)return Promise.all(Y).then((H)=>{return P.mergeArray(Q,H)});else return P.mergeArray(Q,Y)}get items(){return this._def.items}rest($){return new i({...this._def,rest:$})}}i.create=($,Q)=>{if(!Array.isArray($))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new i({items:$,typeName:w.ZodTuple,rest:null,...N(Q)})};class g0 extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){const{status:Q,ctx:W}=this._processInputParams($);if(W.parsedType!==O.object)return _(W,{code:R.invalid_type,expected:O.object,received:W.parsedType}),K;const J=[],Y=this._def.keyType,H=this._def.valueType;for(let q in W.data)J.push({key:Y._parse(new n(W,q,W.path,q)),value:H._parse(new n(W,W.data[q],W.path,q))});if(W.common.async)return P.mergeObjectAsync(Q,J);else return P.mergeObjectSync(Q,J)}get element(){return this._def.valueType}static create($,Q,W){if(Q instanceof j)return new g0({keyType:$,valueType:Q,typeName:w.ZodRecord,...N(W)});return new g0({keyType:u.create(),valueType:$,typeName:w.ZodRecord,...N(Q)})}}class T0 extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){const{status:Q,ctx:W}=this._processInputParams($);if(W.parsedType!==O.map)return _(W,{code:R.invalid_type,expected:O.map,received:W.parsedType}),K;const J=this._def.keyType,Y=this._def.valueType,H=[...W.data.entries()].map(([q,z],X)=>{return{key:J._parse(new n(W,q,W.path,[X,"key"])),value:Y._parse(new n(W,z,W.path,[X,"value"]))}});if(W.common.async){const q=new Map;return Promise.resolve().then(async()=>{for(let z of H){const X=await z.key,B=await z.value;if(X.status==="aborted"||B.status==="aborted")return K;if(X.status==="dirty"||B.status==="dirty")Q.dirty();q.set(X.value,B.value)}return{status:Q.value,value:q}})}else{const q=new Map;for(let z of H){const{key:X,value:B}=z;if(X.status==="aborted"||B.status==="aborted")return K;if(X.status==="dirty"||B.status==="dirty")Q.dirty();q.set(X.value,B.value)}return{status:Q.value,value:q}}}}T0.create=($,Q,W)=>{return new T0({valueType:Q,keyType:$,typeName:w.ZodMap,...N(W)})};class z0 extends j{_parse($){const{status:Q,ctx:W}=this._processInputParams($);if(W.parsedType!==O.set)return _(W,{code:R.invalid_type,expected:O.set,received:W.parsedType}),K;const J=this._def;if(J.minSize!==null){if(W.data.size<J.minSize.value)_(W,{code:R.too_small,minimum:J.minSize.value,type:"set",inclusive:!0,exact:!1,message:J.minSize.message}),Q.dirty()}if(J.maxSize!==null){if(W.data.size>J.maxSize.value)_(W,{code:R.too_big,maximum:J.maxSize.value,type:"set",inclusive:!0,exact:!1,message:J.maxSize.message}),Q.dirty()}const Y=this._def.valueType;function H(z){const X=new Set;for(let B of z){if(B.status==="aborted")return K;if(B.status==="dirty")Q.dirty();X.add(B.value)}return{status:Q.value,value:X}}const q=[...W.data.values()].map((z,X)=>Y._parse(new n(W,z,W.path,X)));if(W.common.async)return Promise.all(q).then((z)=>H(z));else return H(q)}min($,Q){return new z0({...this._def,minSize:{value:$,message:L.toString(Q)}})}max($,Q){return new z0({...this._def,maxSize:{value:$,message:L.toString(Q)}})}size($,Q){return this.min($,Q).max($,Q)}nonempty($){return this.min(1,$)}}z0.create=($,Q)=>{return new z0({valueType:$,minSize:null,maxSize:null,typeName:w.ZodSet,...N(Q)})};class U0 extends j{constructor(){super(...arguments);this.validate=this.implement}_parse($){const{ctx:Q}=this._processInputParams($);if(Q.parsedType!==O.function)return _(Q,{code:R.invalid_type,expected:O.function,received:Q.parsedType}),K;function W(q,z){return d0({data:q,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,p0(),b0].filter((X)=>!!X),issueData:{code:R.invalid_arguments,argumentsError:z}})}function J(q,z){return d0({data:q,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,p0(),b0].filter((X)=>!!X),issueData:{code:R.invalid_return_type,returnTypeError:z}})}const Y={errorMap:Q.common.contextualErrorMap},H=Q.data;if(this._def.returns instanceof X0){const q=this;return T(async function(...z){const X=new Z([]),B=await q._def.args.parseAsync(z,Y).catch((S)=>{throw X.addIssue(W(z,S)),X}),U=await Reflect.apply(H,this,B);return await q._def.returns._def.type.parseAsync(U,Y).catch((S)=>{throw X.addIssue(J(U,S)),X})})}else{const q=this;return T(function(...z){const X=q._def.args.safeParse(z,Y);if(!X.success)throw new Z([W(z,X.error)]);const B=Reflect.apply(H,this,X.data),U=q._def.returns.safeParse(B,Y);if(!U.success)throw new Z([J(B,U.error)]);return U.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...$){return new U0({...this._def,args:i.create($).rest(e.create())})}returns($){return new U0({...this._def,returns:$})}implement($){return this.parse($)}strictImplement($){return this.parse($)}static create($,Q,W){return new U0({args:$?$:i.create([]).rest(e.create()),returns:Q||e.create(),typeName:w.ZodFunction,...N(W)})}}class N0 extends j{get schema(){return this._def.getter()}_parse($){const{ctx:Q}=this._processInputParams($);return this._def.getter()._parse({data:Q.data,path:Q.path,parent:Q})}}N0.create=($,Q)=>{return new N0({getter:$,typeName:w.ZodLazy,...N(Q)})};class j0 extends j{_parse($){if($.data!==this._def.value){const Q=this._getOrReturnCtx($);return _(Q,{received:Q.data,code:R.invalid_literal,expected:this._def.value}),K}return{status:"valid",value:$.data}}get value(){return this._def.value}}j0.create=($,Q)=>{return new j0({value:$,typeName:w.ZodLiteral,...N(Q)})};class W0 extends j{_parse($){if(typeof $.data!=="string"){const Q=this._getOrReturnCtx($),W=this._def.values;return _(Q,{expected:M.joinValues(W),received:Q.parsedType,code:R.invalid_type}),K}if(this._def.values.indexOf($.data)===-1){const Q=this._getOrReturnCtx($),W=this._def.values;return _(Q,{received:Q.data,code:R.invalid_enum_value,options:W}),K}return T($.data)}get options(){return this._def.values}get enum(){const $={};for(let Q of this._def.values)$[Q]=Q;return $}get Values(){const $={};for(let Q of this._def.values)$[Q]=Q;return $}get Enum(){const $={};for(let Q of this._def.values)$[Q]=Q;return $}extract($){return W0.create($)}exclude($){return W0.create(this.options.filter((Q)=>!$.includes(Q)))}}W0.create=d$;class v0 extends j{_parse($){const Q=M.getValidEnumValues(this._def.values),W=this._getOrReturnCtx($);if(W.parsedType!==O.string&&W.parsedType!==O.number){const J=M.objectValues(Q);return _(W,{expected:M.joinValues(J),received:W.parsedType,code:R.invalid_type}),K}if(Q.indexOf($.data)===-1){const J=M.objectValues(Q);return _(W,{received:W.data,code:R.invalid_enum_value,options:J}),K}return T($.data)}get enum(){return this._def.values}}v0.create=($,Q)=>{return new v0({values:$,typeName:w.ZodNativeEnum,...N(Q)})};class X0 extends j{unwrap(){return this._def.type}_parse($){const{ctx:Q}=this._processInputParams($);if(Q.parsedType!==O.promise&&Q.common.async===!1)return _(Q,{code:R.invalid_type,expected:O.promise,received:Q.parsedType}),K;const W=Q.parsedType===O.promise?Q.data:Promise.resolve(Q.data);return T(W.then((J)=>{return this._def.type.parseAsync(J,{path:Q.path,errorMap:Q.common.contextualErrorMap})}))}}X0.create=($,Q)=>{return new X0({type:$,typeName:w.ZodPromise,...N(Q)})};class y extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===w.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse($){const{status:Q,ctx:W}=this._processInputParams($),J=this._def.effect||null,Y={addIssue:(H)=>{if(_(W,H),H.fatal)Q.abort();else Q.dirty()},get path(){return W.path}};if(Y.addIssue=Y.addIssue.bind(Y),J.type==="preprocess"){const H=J.transform(W.data,Y);if(W.common.issues.length)return{status:"dirty",value:W.data};if(W.common.async)return Promise.resolve(H).then((q)=>{return this._def.schema._parseAsync({data:q,path:W.path,parent:W})});else return this._def.schema._parseSync({data:H,path:W.path,parent:W})}if(J.type==="refinement"){const H=(q)=>{const z=J.refinement(q,Y);if(W.common.async)return Promise.resolve(z);if(z instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return q};if(W.common.async===!1){const q=this._def.schema._parseSync({data:W.data,path:W.path,parent:W});if(q.status==="aborted")return K;if(q.status==="dirty")Q.dirty();return H(q.value),{status:Q.value,value:q.value}}else return this._def.schema._parseAsync({data:W.data,path:W.path,parent:W}).then((q)=>{if(q.status==="aborted")return K;if(q.status==="dirty")Q.dirty();return H(q.value).then(()=>{return{status:Q.value,value:q.value}})})}if(J.type==="transform")if(W.common.async===!1){const H=this._def.schema._parseSync({data:W.data,path:W.path,parent:W});if(!P0(H))return H;const q=J.transform(H.value,Y);if(q instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:Q.value,value:q}}else return this._def.schema._parseAsync({data:W.data,path:W.path,parent:W}).then((H)=>{if(!P0(H))return H;return Promise.resolve(J.transform(H.value,Y)).then((q)=>({status:Q.value,value:q}))});M.assertNever(J)}}y.create=($,Q,W)=>{return new y({schema:$,typeName:w.ZodEffects,effect:Q,...N(W)})};y.createWithPreprocess=($,Q,W)=>{return new y({schema:Q,effect:{type:"preprocess",transform:$},typeName:w.ZodEffects,...N(W)})};class o extends j{_parse($){if(this._getType($)===O.undefined)return T(void 0);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}o.create=($,Q)=>{return new o({innerType:$,typeName:w.ZodOptional,...N(Q)})};class J0 extends j{_parse($){if(this._getType($)===O.null)return T(null);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}J0.create=($,Q)=>{return new J0({innerType:$,typeName:w.ZodNullable,...N(Q)})};class M0 extends j{_parse($){const{ctx:Q}=this._processInputParams($);let W=Q.data;if(Q.parsedType===O.undefined)W=this._def.defaultValue();return this._def.innerType._parse({data:W,path:Q.path,parent:Q})}removeDefault(){return this._def.innerType}}M0.create=($,Q)=>{return new M0({innerType:$,typeName:w.ZodDefault,defaultValue:typeof Q.default==="function"?Q.default:()=>Q.default,...N(Q)})};class x0 extends j{_parse($){const{ctx:Q}=this._processInputParams($),W={...Q,common:{...Q.common,issues:[]}},J=this._def.innerType._parse({data:W.data,path:W.path,parent:{...W}});if(o0(J))return J.then((Y)=>{return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new Z(W.common.issues)},input:W.data})}});else return{status:"valid",value:J.status==="valid"?J.value:this._def.catchValue({get error(){return new Z(W.common.issues)},input:W.data})}}removeCatch(){return this._def.innerType}}x0.create=($,Q)=>{return new x0({innerType:$,typeName:w.ZodCatch,catchValue:typeof Q.catch==="function"?Q.catch:()=>Q.catch,...N(Q)})};class m0 extends j{_parse($){if(this._getType($)!==O.nan){const W=this._getOrReturnCtx($);return _(W,{code:R.invalid_type,expected:O.nan,received:W.parsedType}),K}return{status:"valid",value:$.data}}}m0.create=($)=>{return new m0({typeName:w.ZodNaN,...N($)})};var G5=Symbol("zod_brand");class H$ extends j{_parse($){const{ctx:Q}=this._processInputParams($),W=Q.data;return this._def.type._parse({data:W,path:Q.path,parent:Q})}unwrap(){return this._def.type}}class y0 extends j{_parse($){const{status:Q,ctx:W}=this._processInputParams($);if(W.common.async)return(async()=>{const Y=await this._def.in._parseAsync({data:W.data,path:W.path,parent:W});if(Y.status==="aborted")return K;if(Y.status==="dirty")return Q.dirty(),p$(Y.value);else return this._def.out._parseAsync({data:Y.value,path:W.path,parent:W})})();else{const J=this._def.in._parseSync({data:W.data,path:W.path,parent:W});if(J.status==="aborted")return K;if(J.status==="dirty")return Q.dirty(),{status:"dirty",value:J.value};else return this._def.out._parseSync({data:J.value,path:W.path,parent:W})}}static create($,Q){return new y0({in:$,out:Q,typeName:w.ZodPipeline})}}class Z0 extends j{_parse($){const Q=this._def.innerType._parse($);if(P0(Q))Q.value=Object.freeze(Q.value);return Q}}Z0.create=($,Q)=>{return new Z0({innerType:$,typeName:w.ZodReadonly,...N(Q)})};var o$=($,Q={},W)=>{if($)return H0.create().superRefine((J,Y)=>{var H,q;if(!$(J)){const z=typeof Q==="function"?Q(J):typeof Q==="string"?{message:Q}:Q,X=(q=(H=z.fatal)!==null&&H!==void 0?H:W)!==null&&q!==void 0?q:!0,B=typeof z==="string"?{message:z}:z;Y.addIssue({code:"custom",...B,fatal:X})}});return H0.create()},q5={object:f.lazycreate},w;(function($){$.ZodString="ZodString",$.ZodNumber="ZodNumber",$.ZodNaN="ZodNaN",$.ZodBigInt="ZodBigInt",$.ZodBoolean="ZodBoolean",$.ZodDate="ZodDate",$.ZodSymbol="ZodSymbol",$.ZodUndefined="ZodUndefined",$.ZodNull="ZodNull",$.ZodAny="ZodAny",$.ZodUnknown="ZodUnknown",$.ZodNever="ZodNever",$.ZodVoid="ZodVoid",$.ZodArray="ZodArray",$.ZodObject="ZodObject",$.ZodUnion="ZodUnion",$.ZodDiscriminatedUnion="ZodDiscriminatedUnion",$.ZodIntersection="ZodIntersection",$.ZodTuple="ZodTuple",$.ZodRecord="ZodRecord",$.ZodMap="ZodMap",$.ZodSet="ZodSet",$.ZodFunction="ZodFunction",$.ZodLazy="ZodLazy",$.ZodLiteral="ZodLiteral",$.ZodEnum="ZodEnum",$.ZodEffects="ZodEffects",$.ZodNativeEnum="ZodNativeEnum",$.ZodOptional="ZodOptional",$.ZodNullable="ZodNullable",$.ZodDefault="ZodDefault",$.ZodCatch="ZodCatch",$.ZodPromise="ZodPromise",$.ZodBranded="ZodBranded",$.ZodPipeline="ZodPipeline",$.ZodReadonly="ZodReadonly"})(w||(w={}));var H5=($,Q={message:`Input not instance of ${$.name}`})=>o$((W)=>W instanceof $,Q),r$=u.create,i$=$0.create,z5=m0.create,X5=Q0.create,a$=L0.create,B5=q0.create,R5=h0.create,O5=w0.create,_5=K0.create,U5=H0.create,L5=e.create,w5=r.create,K5=k0.create,D5=c.create,F5=f.create,N5=f.strictCreate,j5=D0.create,v5=r0.create,M5=F0.create,V5=i.create,S5=g0.create,E5=T0.create,C5=z0.create,f5=U0.create,A5=N0.create,I5=j0.create,b5=W0.create,P5=v0.create,h5=X0.create,c$=y.create,k5=o.create,g5=J0.create,T5=y.createWithPreprocess,x5=y0.create,m5=()=>r$().optional(),Z5=()=>i$().optional(),y5=()=>a$().optional(),l5={string:($)=>u.create({...$,coerce:!0}),number:($)=>$0.create({...$,coerce:!0}),boolean:($)=>L0.create({...$,coerce:!0}),bigint:($)=>Q0.create({...$,coerce:!0}),date:($)=>q0.create({...$,coerce:!0})},u5=K,G=Object.freeze({__proto__:null,defaultErrorMap:b0,setErrorMap:d6,getErrorMap:p0,makeIssue:d0,EMPTY_PATH:o6,addIssueToContext:_,ParseStatus:P,INVALID:K,DIRTY:p$,OK:T,isAborted:Y$,isDirty:G$,isValid:P0,isAsync:o0,get util(){return M},get objectUtil(){return J$},ZodParsedType:O,getParsedType:t,ZodType:j,ZodString:u,ZodNumber:$0,ZodBigInt:Q0,ZodBoolean:L0,ZodDate:q0,ZodSymbol:h0,ZodUndefined:w0,ZodNull:K0,ZodAny:H0,ZodUnknown:e,ZodNever:r,ZodVoid:k0,ZodArray:c,ZodObject:f,ZodUnion:D0,ZodDiscriminatedUnion:r0,ZodIntersection:F0,ZodTuple:i,ZodRecord:g0,ZodMap:T0,ZodSet:z0,ZodFunction:U0,ZodLazy:N0,ZodLiteral:j0,ZodEnum:W0,ZodNativeEnum:v0,ZodPromise:X0,ZodEffects:y,ZodTransformer:y,ZodOptional:o,ZodNullable:J0,ZodDefault:M0,ZodCatch:x0,ZodNaN:m0,BRAND:G5,ZodBranded:H$,ZodPipeline:y0,ZodReadonly:Z0,custom:o$,Schema:j,ZodSchema:j,late:q5,get ZodFirstPartyTypeKind(){return w},coerce:l5,any:U5,array:D5,bigint:X5,boolean:a$,date:B5,discriminatedUnion:v5,effect:c$,enum:b5,function:f5,instanceof:H5,intersection:M5,lazy:A5,literal:I5,map:E5,nan:z5,nativeEnum:P5,never:w5,null:_5,nullable:g5,number:i$,object:F5,oboolean:y5,onumber:Z5,optional:k5,ostring:m5,pipeline:x5,preprocess:T5,promise:h5,record:S5,set:C5,strictObject:N5,string:r$,symbol:R5,transformer:c$,tuple:V5,undefined:O5,union:j5,unknown:L5,void:K5,NEVER:u5,ZodIssueCode:R,quotelessJson:p6,ZodError:Z});var V=100,c5=6,n5=2000,e$=7000,p5=200,i0=2000,a0=2000,z$=200,d5=-15,o5=15,r5=1e4,$6=500,Q6=["per","tek","agi","dex","int","spi","str","wis","cha"],i5=["Alertness","Craft","Alacrity","Finesse","Mind","Magic","Rage","Science","Charm","None"],NQ=new Set(Q6),I=G.string().uuid(),jQ=I.optional(),x=G.string().min(1).max(V),V0=G.union([G.number().int(),G.string().min(1).max(V)]),W6=G.string().email(),X$=G.string().min(c5).max(n5),a5=G.enum(["USER","ADMIN"]),vQ=G.object({username:x,email:W6,password:X$}),MQ=G.object({username:x,password:X$}),s5=G.object({id:I,username:x,email:W6,role:a5}),VQ=s5.extend({password:X$}),SQ=G.object({token:G.string()}),a=G.number().int().gte(d5).lte(o5).default(0),A=G.number().int().min(0),s$=G.enum(i5),J6=G.enum(["CHARACTER","COG"]),t5=G.enum(Q6),Y6=G.object({agi:a,cha:a,dex:a,int:a,per:a,spi:a,str:a,tek:a,wis:a,hp:A,max_hp:A,mp:A,max_mp:A,vim:A,max_vim:A,hero:A.optional(),max_hero:A.optional(),init:G.number().int(),speed:G.number().int().min(0),xp:G.number().int().optional(),sp:G.number().int().optional(),armor:G.number().int().optional(),burden:G.number().int().optional(),casting:G.number().int().optional(),L:G.number().int().optional(),radius:G.number().optional(),reach:G.number().int().optional(),shield:G.number().int().optional(),bluespace:G.number().int().optional(),trii:G.number().int().optional(),max_trii:G.number().int().optional(),free_hands:G.number().int().optional(),carrying_capacity:G.number().int().optional(),alerts:G.number().int().optional(),max_alerts:G.number().int().optional(),recovery_shock:G.number().int().optional(),acc:G.number().int().optional(),dmg:G.number().int().optional(),actions:A.optional(),reactions:A.optional(),actions_on_turn:G.number().int().optional(),reactions_on_turn:G.number().int().optional(),heroic_creativity_bonus:G.number().int().optional(),aggressive_acc:G.number().int().optional(),aggressive_dmg:G.number().int().optional(),arcane_acc:G.number().int().optional(),arcane_dmg:G.number().int().optional(),balanced_acc:G.number().int().optional(),balanced_dmg:G.number().int().optional(),blade_acc:G.number().int().optional(),blade_dmg:G.number().int().optional(),bow_acc:G.number().int().optional(),bow_dmg:G.number().int().optional(),brawling_acc:G.number().int().optional(),brawling_dmg:G.number().int().optional(),brutal_acc:G.number().int().optional(),brutal_dmg:G.number().int().optional(),cannon_acc:G.number().int().optional(),cannon_dmg:G.number().int().optional(),great_acc:G.number().int().optional(),great_dmg:G.number().int().optional(),grenade_acc:G.number().int().optional(),grenade_dmg:G.number().int().optional(),hookwhip_acc:G.number().int().optional(),hookwhip_dmg:G.number().int().optional(),improvised_acc:G.number().int().optional(),improvised_dmg:G.number().int().optional(),polearm_acc:G.number().int().optional(),polearm_dmg:G.number().int().optional(),protector_acc:G.number().int().optional(),protector_dmg:G.number().int().optional(),rifle_acc:G.number().int().optional(),rifle_dmg:G.number().int().optional(),shotgun_acc:G.number().int().optional(),shotgun_dmg:G.number().int().optional(),sidearm_acc:G.number().int().optional(),sidearm_dmg:G.number().int().optional(),thrown_acc:G.number().int().optional(),thrown_dmg:G.number().int().optional(),tinkertech_acc:G.number().int().optional(),tinkertech_dmg:G.number().int().optional(),unarmed_acc:G.number().int().optional(),unarmed_dmg:G.number().int().optional(),whip_acc:G.number().int().optional(),whip_dmg:G.number().int().optional(),fall_damage_resistance:G.number().int().optional(),vim_damage_resistance:G.number().int().optional(),burn_damage_resistance:G.number().int().optional(),bleed_damage_resistance:G.number().int().optional(),stun_damage_resistance:G.number().int().optional(),paralysis_damage_resistance:G.number().int().optional(),attribute_damage_resistance:G.number().int().optional(),galvanic_damage_resistance:G.number().int().optional(),magical_damage_resistance:G.number().int().optional(),physical_damage_resistance:G.number().int().optional(),piercing_damage_resistance:G.number().int().optional(),slashing_damage_resistance:G.number().int().optional(),bludgeoning_damage_resistance:G.number().int().optional(),burning:A.optional(),bleeding:A.optional(),paralysis:A.optional(),stun:A.optional(),agi_dmg:A.optional(),cha_dmg:A.optional(),dex_dmg:A.optional(),int_dmg:A.optional(),per_dmg:A.optional(),spi_dmg:A.optional(),str_dmg:A.optional(),tek_dmg:A.optional(),wis_dmg:A.optional()}),Y0=G.string().min(1).max(V).toLowerCase().regex(/^\w+$/u,"Contains no spaces. Use '_' instead."),e5=G.number().int(),B$=Y6.catchall(e5),l$=Object.keys(Y6.keyof().Values),$9=["weak","moderate","strong","exceptional"],Q9=G.enum($9),W9=G.object({name:G.string(),level:G.string().or(G.number()),type:G.string(),desc:G.string(),attrOverrides:G.record(t5,Q9),abilitySelection:G.record(G.string(),G.string()),variableAbilityCost:G.record(G.string(),G.string().or(G.number()))}),J9=G.record(G.string(),G.object({toggled:G.boolean()})),R$=G.object({explodes:G.boolean().optional(),rr1s:G.boolean().optional(),drop:G.number().int().optional(),fatigued:G.boolean().optional(),end:G.string().max(V).optional(),flow:G.number().int().optional(),ebb:G.number().int().optional(),heroic_creativity_bonus:G.number().int().optional(),otherToggles:J9.optional(),adjust:V0.optional(),count:G.number().optional(),sides:G.number().optional()}),Y9=G.record(G.string().max(V),G.array(G.object({msg:G.string().max(z$),icon:G.string().max(V).optional()}))),G6=G.object({gift:s$.optional(),second_gift:s$.optional(),cog_type:G.string().max(V).optional(),cog_creation_options:W9.optional(),dice_settings:R$.optional(),in_combat:G.boolean().optional(),disabled_actions:Y9.optional()}),q6=G.object({name:x,type:J6,attributes:B$,other_fields:G6,public:G.boolean().default(!1)}),H6=q6.extend({id:I,owner:I}),EQ=H6.omit({id:!0}).partial().refine(($)=>Object.keys($).length>0,{message:"Partial entity is empty"}),O$=G.object({attr:G.string().max(V).optional(),category:G.string().max(V).optional(),courses:G.string().max(V).optional(),dmg:G.string().max(V).optional(),range:G.string().max(V).optional(),special:G.string().max(i0).optional(),weapon_type:G.string().max(V).optional(),dc_cost:G.number().int().optional(),in_storage:G.boolean().optional(),not_evadable:G.boolean().optional()}),G9=O$.extend({label:G.string().max(V).optional()}),_$=G.record(Y0,V0),q9=G.object({dice:G.string().max(V),attr:Y0,heal:_$.optional()}),z6=G.object({attr:_$}),H9=z6.extend({label:G.string().min(1).max(V).optional()}),X6=G.object({time:G.enum(["turn","encounter","rest","permanent"]),attr:_$.optional(),dice:G.record(Y0,R$).optional(),order:G.number().int().optional()}),z9=G.enum(["equals","gte","gt","lte","lt"]),X9=G.object({type:G.literal("attr"),attr:Y0}),B9=G.object({type:G.literal("ability_field"),path:G.string().min(1).array()}),R9=G.object({type:G.literal("key"),key:G.string().min(1)}),O9=G.object({type:G.literal("const"),const:G.string().min(1)}),_9=G.object({type:G.literal("equation"),equation:G.string().min(1)}),t$=G.union([X9,B9,R9,O9,_9]),U9=G.object({type:G.literal("comp"),left:t$,right:t$,operator:z9}),L9=G.object({type:G.literal("special"),name:G.enum(["isSpell"])}),w9=G.object({type:G.literal("base"),operator:G.enum(["every","some"])}),K9=w9.extend({tests:G.array(G.lazy(()=>B6))}),B6=G.union([U9,L9,K9]),R6=G.object({adjust_cost:V0}),O6=G.object({bonus:G.string().min(1).max(V).optional(),attr:Y0,dice_settings:R$.optional(),label:G.string().min(1).max(V).optional()}),D9=Y0.array(),F9=G.object({criteria:B6,adjust:X6.optional(),adjust_ability_cost:R6.optional(),check:O6.optional()}),N9=F9.array(),U$=G.object({key:G.string().min(1).max(V),label:G.string().min(1).max(V).optional()}),j9=U$.extend({type:G.literal("radio")}),v9=j9.extend({choices:G.record(G.string().min(1),G.lazy(()=>_6))}),M9=U$.extend({type:G.literal("text")}),V9=U$.extend({type:G.literal("number"),min:V0.optional(),max:V0.optional(),default:V0.optional()}),S9=G.union([v9,M9,V9]),_6=S9.array(),L$=G.object({roll:q9.optional(),heal:z6.optional(),optional_heal:H9.array().optional(),adjust:X6.optional(),adjust_ability_cost:R6.optional(),check:O6.optional(),expose_combat_stats:D9.optional(),inputs:_6.optional(),criteria_benefits:N9.optional(),weapons:G9.array().optional()}),E9="red",C9="dark_red",f9="orange",A9="dark_orange",I9="green",b9="dark_green",P9="blue",h9="dark_blue",k9="gray",g9="dark_gray",T9=[E9,C9,f9,A9,I9,b9,P9,h9,k9,g9],x9=G.enum(T9),m9=G.object({mp:G.number().int().optional(),vim:G.number().int().optional(),hp:G.number().int().optional(),hero:G.number().int().optional(),actions:G.number().int().optional(),reactions:G.number().int().optional()}),Z9=G.object({attack:G.boolean().optional(),passive:G.boolean().optional(),respite:G.boolean().optional(),rest:G.boolean().optional(),intermission:G.boolean().optional()}),y9=m9.merge(Z9),l9=G.object({activation:G.string().max(V).optional(),expedited:G.string().max(V).optional(),flavor:G.string().max(e$).optional(),path:G.string().max(V).optional(),purchase:G.string().max(V).optional(),unlocks:G.string().max(V).optional(),partial_unlocks:G.string().max(V).optional(),prereq:G.string().max(p5).optional(),build_dc:G.string().max(V).optional(),build_time:G.string().max(V).optional(),range:G.string().max(V).optional()}),U6=l9.extend({cost:y9.optional(),mp_cost:G.number().int().array().length(3).optional(),cast_dl:G.number().int().array().length(3).optional(),not_req:G.boolean().optional(),repeatable:G.boolean().optional(),times_taken:G.number().int().min(0).optional(),keys:G.record(G.string().min(1),G.string().min(1)).optional(),stars:G.number().int().optional(),highlight:x9.optional()}),CQ=U6.keyof(),s0=G.object({name:x,effect:G.string().min(1).max(e$),custom_fields:U6.optional().nullable(),uses:L$.optional().nullable().catch(null),comment:G.string().max(a0).optional().nullable(),active:G.boolean()}),fQ=s0.partial().refine(($)=>Object.keys($).length>0,{message:"Partial ability is empty"}),u9=s0.extend({id:I,entity_id:I}),c9="equipment",n9="consumable",p9="container",d9="armor",o9="shield",r9="weapon",L6=G.enum([c9,n9,p9,d9,o9,r9]),w$=G.object({name:x,bulk:G.number().int(),desc:G.string().max(i0),type:L6,custom_fields:O$.optional().nullable(),uses:L$.optional().nullable().catch(null),comment:G.string().max(a0).optional().nullable(),active:G.boolean()}),AQ=w$.partial().refine(($)=>Object.keys($).length>0,{message:"Partial item is empty"}),i9=w$.extend({id:I,entity_id:I}),IQ=O$.extend({name:x.optional(),bulk:G.number().int(),desc:G.string().max(i0),type:L6,cost:G.string().max(V),sp:G.number().int().optional(),section:G.string().max(V).optional(),examples:G.string().max(i0).optional(),uses:L$.optional().nullable().catch(null)}),w6=G.object({attr:Y0,msg:G.string().max(z$),prev:G.number().optional().nullable()}),a9=w6.extend({id:I,entity_id:I,time:G.string().datetime()}),s9=G.enum(["NOTES","DESC","BACKSTORY"]),t9=G.object({text:G.string().max(r5)}),e9=G.object({public:G.boolean().default(!1)}),K6=t9.merge(e9).extend({key:s9}),$8=K6.extend({id:I,entity_id:I}),Q8=G.enum(["QUEST","TIDE","GRATE","DAM","EFFLUENT","DELTA"]),W8=G.object({effect:G.string().max($6).optional()}),K$=G.object({type:Q8,text:G.string().max($6),metadata:W8.optional().nullable()}),J8=K$.extend({id:I,entity_id:I}),bQ=K$.partial().refine(($)=>Object.keys($).length>0,{message:"Partial flux is empty"}),Y8=G.object({entity:q6,abilities:s0.array(),items:w$.array(),text:K6.array(),flux:K$.array()}),G8=G.object({entity:H6,abilities:u9.array(),items:i9.array(),text:$8.array(),flux:J8.array()}),PQ=Y8.extend({changelog:w6.array()}),hQ=G8.extend({changelog:a9.array()}),q8="SPECTATOR",H8="PLAYER",z8="GM",X8=[q8,H8,z8],D$=G.enum(X8),B8=G.object({desc:G.string().max(a0)}),R8=B8.extend({name:x}),D6=R8.extend({id:I,in_combat:G.boolean(),init_index:G.number().int().nonnegative(),init_round:G.number().int().nonnegative()}),kQ=D6.extend({role:D$}),O8=G.object({campaign_id:I,to:x,role:D$}),F6=O8.extend({id:I,from:x,created:G.string().datetime()}),gQ=F6.extend({name:x,desc:G.string().max(a0)}),_8=G.object({id:I,campaign_id:I,account_id:I,username:x,role:D$}),U8=G.object({entity_id:I,gm_only:G.boolean()}),L8=U8.extend({owner:I,name:x,type:J6,attributes:B$,other_fields:G6}),TQ=G.object({campaign:D6,invites:F6.array().optional(),members:_8.array(),entities:L8.array()}),w8=B$.partial(),xQ=G.object({message:G.string().max(z$).optional(),attributes:w8.refine(($)=>Object.keys($).length>0,{message:"Attributes is empty"})}),mQ=G.object({attributes:Y0.array()}),K8="VENNT_WEAPON_TYPES",D8="VENNT_SHOP_ITEMS",F8="VENNT_ABILITIES",N8="VENNT_ABILITIES_0.13.7",ZQ=G.enum([K8,D8,F8,N8]),j8=G.object({name:G.string(),url:G.string().url(),desc:G.string(),reqs:G.string().optional(),completionBonus:G.string().optional()}),yQ=G.object({paths:j8.array(),abilities:s0.array()}),p;(function(F){F["PHYSICAL"]="physical";F["MAGICAL"]="magical";F["GALVANIC"]="galvanic";F["PIERCING"]="piercing";F["SLASHING"]="slashing";F["BLUDGEONING"]="bludgeoning";F["VIM"]="vim";F["BURN"]="burn";F["BLEED"]="bleed";F["STUN"]="stun";F["PARALYSIS"]="paralysis";F["ATTRIBUTE"]="attribute";F["FALL"]="fall"})(p||(p={}));var lQ=[p.BLUDGEONING,p.GALVANIC,p.MAGICAL,p.PHYSICAL,p.PIERCING,p.SLASHING],uQ=[p.BLUDGEONING,p.PIERCING,p.SLASHING];export{G9 as weaponFieldsWithOptionalLabel,l$ as validAttributes,L$ as usesValidator,M9 as useTextInput,q9 as useRollValidator,j9 as useRadioInputBase,v9 as useRadioInput,H9 as useOptionalHealValidator,V9 as useNumberInput,_6 as useInputs,U$ as useInputBase,S9 as useInput,z6 as useHealValidator,D9 as useExposeCombatStats,B6 as useCriteriaValidator,L9 as useCriteriaSpecialValidator,U9 as useCriteriaCompValidator,t$ as useCriteriaCompFieldValidator,R9 as useCriteriaCompFieldKeyValidator,_9 as useCriteriaCompFieldEquationValidator,O9 as useCriteriaCompFieldConstValidator,X9 as useCriteriaCompFieldAttrValidator,B9 as useCriteriaCompFieldAbilityValidator,N9 as useCriteriaBenefitResults,F9 as useCriteriaBenefit,w9 as useCriteriaBaseValidatorBase,K9 as useCriteriaBaseValidator,O6 as useCheckValidator,_$ as useAttrMapValidator,X6 as useAdjustValidator,R6 as useAdjustAbilityCostValidator,zQ as titleText,qQ as solvePendingEquations,G0 as solveEquation,o8 as skimDownEntity,vQ as signupRequestValidator,IQ as shopItemValidator,a5 as roleValidator,t0 as replaceVariablesInEquation,R8 as postCampaignValidator,O8 as postCampaignInviteValidator,U8 as postCampaignEntityValidator,yQ as pathsAndAbilitiesValidator,j8 as pathDetailsValidator,X$ as passwordValidator,AQ as partialItemValidator,EQ as partialEntityValidator,bQ as partialEntityFluxValidator,w8 as partialAttributesValidator,fQ as partialAbilityValidator,G6 as otherAttributesValidator,jQ as optionalIdValidator,x as nameValidator,MQ as loginRequestValidator,ZQ as jsonStorageKeyValidator,w$ as itemValidator,L6 as itemTypeValidator,O$ as itemFieldsValidator,I as idValidator,x9 as highlightValidator,s$ as giftValidator,i9 as fullItemValidator,H6 as fullEntityValidator,$8 as fullEntityTextValidator,J8 as fullEntityFluxValidator,hQ as fullCollectedEntityWithChangelogValidator,G8 as fullCollectedEntityValidator,TQ as fullCampaignDetailsValidator,a9 as fullAttributeChangelogValidator,u9 as fullAbilityValidator,Q8 as fluxTypeValidator,W8 as fluxMetadataValidator,mQ as filterChangelogValidator,V0 as equationValidator,q6 as entityValidator,J6 as entityTypeValidator,K6 as entityTextValidator,t9 as entityTextTextValidator,e9 as entityTextPermissionValidator,s9 as entityTextKeyValidator,K$ as entityFluxValidator,W6 as emailValidator,Y9 as disabledActionsValidator,T8 as diceTogglesForEntity,R$ as diceSettingsValidator,k8 as diceParseFromString,J9 as diceOtherTogglesValidator,h8 as defaultDice,VQ as dangerousAccountInfoValidator,z9 as criteriaFieldOperator,c8 as computeAttributes,u0 as combineDiceSettings,A as combatStatValidator,PQ as collectedEntityWithChangelogValidator,Y8 as collectedEntityValidator,W9 as cogCreateOptionsValidator,Q9 as cogAttributeLevelValidator,kQ as campaignWithRoleValidator,D6 as campaignValidator,D$ as campaignRoleValidator,_8 as campaignMemberValidator,gQ as campaignInviteWithDetailsValidator,F6 as campaignInviteValidator,L8 as campaignEntityValidator,B8 as campaignDescValidator,Y6 as builtInAttributesValidator,g8 as buildSettingsForAttrList,V$ as buildDice,t5 as baseAttributeFieldValidator,c6 as attrsRegexStr,B$ as attributesValidator,a as attributeValidator,e5 as attributeValValidator,Y0 as attributeNameValidator,w6 as attributeChangelogValidator,xQ as adjustAttributesValidator,SQ as accountTokenValidator,s5 as accountInfoValidator,s0 as abilityValidator,R0 as abilityPassCriteriaCheck,l9 as abilityFieldsValidatorStrings,U6 as abilityFieldsValidator,CQ as abilityFieldsNameValidator,v$ as abilityExtendEntityAttributes,y9 as abilityCostValidator,m9 as abilityCostNumberValidator,Z9 as abilityCostBooleanValidator,K8 as WEAPON_TYPES_KEY,D8 as SHOP_ITEMS_KEY,E9 as RED_HIGHLIGHT,uQ as PHYSICAL_SUB_DAMAGES,c5 as PASSWORD_MIN,n5 as PASSWORD_MAX,h6 as ORDER_XP,b6 as ORDER_PRE_ATTR,E$ as ORDER_LAST,x6 as ORDER_CUSTOM_ATTR,T6 as ORDER_COMBAT_STAT,k6 as ORDER_BASE_COMBAT_STAT,P6 as ORDER_ATTR,g6 as ORDER_ARMOR,f9 as ORANGE_HIGHLIGHT,lQ as NORMAL_DAMAGES,V as NAME_MAX,M8 as LEVEL_UPS_TO_INCREASE_ATTR,r9 as ITEM_TYPE_WEAPON,o9 as ITEM_TYPE_SHIELD,c9 as ITEM_TYPE_EQUIPMENT,p9 as ITEM_TYPE_CONTAINER,n9 as ITEM_TYPE_CONSUMABLE,d9 as ITEM_TYPE_ARMOR,i0 as ITEM_MAX,T9 as HIGHLIGHT_COLORS,I9 as GREEN_HIGHLIGHT,k9 as GRAY_HIGHLIGHT,r5 as ENTITY_TEXT_MAX,$6 as ENTITY_FLUX_MAX,p as DamageType,j$ as DEFAULT_CHARACTER_ADJUSTMENTS,l0 as DEFAULT_ATTRS_MAP,N$ as DEFAULT_ADJUSTMENTS,C9 as DARK_RED_HIGHLIGHT,A9 as DARK_ORANGE_HIGHLIGHT,b9 as DARK_GREEN_HIGHLIGHT,g9 as DARK_GRAY_HIGHLIGHT,h9 as DARK_BLUE_HIGHLIGHT,a0 as COMMENT_MAX,$9 as COG_ATTRIBUTE_LEVELS,i5 as CHARACTER_GIFTS,z$ as CHANGELOG_MAX,q8 as CAMPAIGN_ROLE_SPECTATOR,H8 as CAMPAIGN_ROLE_PLAYER,z8 as CAMPAIGN_ROLE_GM,X8 as CAMPAIGN_ROLES,P9 as BLUE_HIGHLIGHT,d5 as ATTRIBUTE_MIN,o5 as ATTRIBUTE_MAX,NQ as ATTRIBUTES_SET,Q6 as ATTRIBUTES,p5 as ABILITY_PREREQ_MAX,e$ as ABILITY_MAX,N8 as ABILITIES_KEY_OLD,F8 as ABILITIES_KEY};
